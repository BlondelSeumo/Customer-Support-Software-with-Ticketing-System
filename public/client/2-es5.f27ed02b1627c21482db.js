function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=_superPropBase(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/RwR":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("0IaG"),a=n("fXoL"),o=n("VaLf"),r=n("kmQS"),s=n("NFeN"),c=n("ofXK"),l=n("bTqV");function u(t,e){if(1&t&&(a.Ub(0,"p",9),a.Kc(1),a.Tb()),2&t){var n=a.fc();a.Bb(1),a.Lc(n.data.bodyBold)}}var h=function(){var t=function(){function t(e,n,i,a){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.i18n=i,this.settings=a}return _createClass(t,[{key:"ngOnInit",value:function(){for(var t in this.data.ok||(this.data.ok="Confirm"),this.data.cancel||(this.data.cancel="Cancel"),this.data)"string"==typeof this.data[t]&&(this.data[t]=this.i18n.t(this.data[t],this.data.replacements))}},{key:"confirm",value:function(){this.dialogRef.close(!0)}},{key:"close",value:function(){this.dialogRef.close(!1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Ob(i.h),a.Ob(i.a),a.Ob(o.a),a.Ob(r.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["confirm-modal"]],decls:14,vars:5,consts:[[1,"modal-header"],["mat-dialog-title","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["mat-dialog-content","",1,"mat-dialog-contents"],["class","bold",4,"ngIf"],["mat-dialog-actions","",1,"buttons","right","mat-dialog-actions"],["type","button","mat-button","",1,"button","cancel","cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","cdkFocusInitial","",1,"button","primary","submit-button",3,"click"],[1,"bold"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"h2",1),a.Kc(2),a.Tb(),a.Ub(3,"button",2),a.bc("click",(function(){return e.close()})),a.Pb(4,"mat-icon",3),a.Tb(),a.Tb(),a.Ub(5,"div",4),a.Ub(6,"p"),a.Kc(7),a.Tb(),a.Ic(8,u,2,1,"p",5),a.Tb(),a.Ub(9,"div",6),a.Ub(10,"button",7),a.bc("click",(function(){return e.close()})),a.Kc(11),a.Tb(),a.Ub(12,"button",8),a.bc("click",(function(){return e.confirm()})),a.Kc(13),a.Tb(),a.Tb()),2&t&&(a.Bb(2),a.Lc(e.data.title),a.Bb(5),a.Lc(e.data.body),a.Bb(1),a.nc("ngIf",e.data.bodyBold),a.Bb(3),a.Lc(e.data.cancel),a.Bb(2),a.Lc(e.data.ok))},directives:[i.i,s.a,i.f,c.t,i.c,l.b],styles:["[_nghost-%COMP%]{display:block;max-width:500px}.modal-header[_ngcontent-%COMP%]{margin-bottom:10px}.bold[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0}),t}()},"/w9p":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("fXoL").r)("PREVIEW_URL_TRANSFORMER",{factory:function(){return function(t){return t.url}},providedIn:"root"})},"0Gur":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("ofXK"),a=n("A5z7"),o=n("NFeN"),r=n("3Pt+"),s=n("6rvT"),c=n("/1cH"),l=n("bTqV"),u=n("FKr1"),h=n("fXoL"),d=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=h.Mb({type:t}),t.\u0275inj=h.Lb({factory:function(e){return new(e||t)},imports:[[i.c,a.g,c.b,r.E,s.a,l.c,o.b,u.r]]}),t}()},"1ImS":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("ofXK"),a=n("NFeN"),o=n("6rvT"),r=n("bSwM"),s=n("3Pt+"),c=n("bTqV"),l=n("A5z7"),u=n("bv9b"),h=n("0Gur"),d=n("Iysn"),p=n("fXoL"),b=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[i.c,o.a,s.E,s.o,h.a,d.a,c.c,a.b,r.b,l.g,u.b],r.b]}),t}()},"2hX1":function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("2Vo4"),a=n("itXk"),o=n("re4b"),r=n("Kj3r"),s=n("lJxs"),c=n("Zy1z"),l=n("pLZG"),u=n("vkgz"),h=n("F96W"),d=n("/RwR"),p={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"},b=n("hLX6"),f=n("8LU1");function g(t,e){var n=b.pick(e,t);if(Object(f.a)(n)){var i=Number(n);return i<9007199254740991?i:n}return n}var m,v=n("fXoL"),y=n("QGXG"),_=n("tyNb"),C=n("LRXf"),k=n("ahrr"),w=((m=function(){function t(e,n,a,r){_classCallCheck(this,t),this.modal=e,this.router=n,this.http=a,this.localStorage=r,this.sort$=new i.a({}),this.filters$=new i.a({}),this.staticParams$=new i.a({}),this.paginator=new o.a(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new i.a([]),this.data$=new i.a([]),this.selectedRows$=new i.a([])}return _createClass(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=e,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),e.staticParams)),e.uri?this.connectToPaginator():e.initialData&&(this.data=e.initialData),this.mainSub=Object(a.a)([this.sort$,this.filters$,this.staticParams$]).pipe(Object(r.a)(0),Object(s.a)((function(t){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(t)))}))).subscribe((function(e){if(t.ignoreNextParamChange)return t.ignoreNextParamChange=!1;e=Object(h.a)(e),Object.entries(e).forEach((function(t){var n=_slicedToArray(t,2),i=n[0],a=n[1];"object"==typeof a&&a.id&&(e[i+"Id"]=a.id,delete e[i])})),t.config.uri?t.paginator.paginate(e,t.config.uri,t.config.initialData):Object.keys(e).length&&t.data.length&&t.applyLocalTransforms(e)})),this}},{key:"connectToPaginator",value:function(){var t=this;this.paginatorSub=this.paginator.response$.pipe(Object(c.a)()).subscribe((function(e){var n,i=_slicedToArray(e,2),a=i[0],o=i[1],r=t.config.infiniteScroll&&(null===(n=null==a?void 0:a.pagination)||void 0===n?void 0:n.current_page)!==o.pagination.current_page?[].concat(_toConsumableArray(t.data$.value),_toConsumableArray(o.pagination.data)):o.pagination.data;t.data$.next(r)}))}},{key:"applyLocalTransforms",value:function(t){var e=_toConsumableArray(this.originalData$.value);t.query&&(e=function(t,e){return t.filter((function(t){return function(t,e){var n=function t(e){return Object.keys(e).reduce((function(n,i){return n+(e[i]&&"object"==typeof e[i]?t(e[i]):e[i])+"\u25ec"}),"").toLowerCase()}(t),i=e.trim().toLowerCase();return-1!==n.indexOf(i)}(t,e)}))}(e,t.query)),t.orderBy&&t.orderDir&&(e=function(t,e,n){return t.sort((function(t,i){var a=g(t,e),o=g(i,e),r=typeof a,s=typeof o;r!==s&&("number"===r&&(a+=""),"number"===s&&(o+=""));var c=0;return null!=a&&null!=o?a>o?c=1:a<o&&(c=-1):null!=a?c=1:null!=o&&(c=-1),c*("asc"===n?1:-1)}))}(e,t.orderBy,t.orderDir)),this.data$.next(e)}},{key:"addFilter",value:function(t,e){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),_defineProperty({},t,e)))}},{key:"removeFilter",value:function(t){var e=Object.assign({},this.filters$.value);delete e[t],this.filters$.next(e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),t&&this.staticParams$.next(t)}},{key:"openCrupdateResourceModal",value:function(t,e,n){var i=this;return this.modal.open(t,e,n).beforeClosed().pipe(Object(l.a)((function(t){return!!t})),Object(u.a)((function(){return i.reset()})))}},{key:"confirmResourceDeletion",value:function(t){var e=Object.assign(Object.assign({},p),{replacements:{resource:t}});return this.modal.open(d.a,e).afterClosed().pipe(Object(l.a)((function(t){return t})))}},{key:"getCurrentParams",value:function(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}},{key:"destroy",value:function(){var t,e;null===(t=this.paginatorSub)||void 0===t||t.unsubscribe(),null===(e=this.mainSub)||void 0===e||e.unsubscribe()}},{key:"data",get:function(){return this.data$.value},set:function(t){var e=_toConsumableArray(t);this.originalData$.next(e),this.data$.next(e),this.ignoreNextParamChange=!0,this.reset()}}]),t}()).\u0275fac=function(t){return new(t||m)(v.Yb(y.a),v.Yb(_.f),v.Yb(C.a),v.Yb(k.a))},m.\u0275prov=v.Kb({token:m,factory:m.\u0275fac}),m)},"6SKC":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("4Ait"),a=n("fXoL"),o=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return isNaN(parseFloat(String(t)))||!isFinite(t)?"-":Object(i.a)(t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Nb({name:"formattedFileSize",type:t,pure:!0}),t}()},"7LS1":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("2Vo4"),a=n("XNiG"),o=n("vUXK"),r=n("+rOU"),s=n("itxp"),c=n("ZiO8"),l=n("pLZG"),u=n("/w9p"),h=n("fXoL"),d=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.availablePreviews=e,this.injector=n,this.files=[],this.portal=new i.a(null),this.meta=new i.a({}),this.previewUriTransformer=null,this.download=new a.a}return _createClass(t,[{key:"pagination",value:function(){return this.meta.pipe(Object(l.a)((function(t){return t&&!!t.entry})))}},{key:"getCurrent",value:function(){return this.meta.value.entry}},{key:"getAllEntries",value:function(){return this.files}},{key:"getPortal",value:function(){return this.portal.asObservable()}},{key:"showNext",value:function(){this.meta.value.haveNext&&(this.updateMeta("next"),this.updatePortal())}},{key:"showPrevious",value:function(){this.meta.value.havePrevious&&(this.updateMeta("previous"),this.updatePortal())}},{key:"updateMeta",value:function(t){var e=0;if("string"==typeof t){var n=this.meta.value.pointer;e="next"===t?n+1:n-1}else"number"==typeof t&&(e=t);this.meta.next({pointer:e,entry:this.files[e],total:this.files.length,haveNext:e+1<this.files.length,havePrevious:e-1>-1})}},{key:"updatePortal",value:function(){var t=this.getCurrent();this.portal.next(new r.d(t&&this.availablePreviews[t.type]||c.a,null,this.createInjector()))}},{key:"set",value:function(t,e){t&&0!==t.length&&(this.files=t.filter((function(t){return"folder"!==t.type})),this.updateMeta(e),this.updatePortal())}},{key:"createInjector",value:function(){var t=new WeakMap;return t.set(s.a,this.getCurrent()),this.previewUriTransformer&&t.set(u.a,this.previewUriTransformer),new r.g(this.injector,t)}},{key:"destroy",value:function(){this.meta.next({}),this.files=null,this.portal.next(null)}},{key:"setPreviewUriTransformer",value:function(t){this.previewUriTransformer=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Yb(o.a),h.Yb(h.s))},t.\u0275prov=h.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"83jf":function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("fXoL"),a=n("nPOm"),o=n("tTc1"),r=n("ZfYz"),s=n("7LS1"),c=n("kmQS"),l=n("ofXK"),u=n("bTqV"),h=n("NFeN");function d(t,e){if(1&t){var n=i.Vb();i.Ub(0,"button",3),i.bc("click",(function(){return i.zc(n),i.fc().closed.emit(!0)})),i.Pb(1,"mat-icon",4),i.Tb()}}function p(t,e){if(1&t){var n=i.Vb();i.Sb(0),i.Ub(1,"div",9),i.Ub(2,"button",10),i.bc("click",(function(){return i.zc(n),i.fc(2).previewFiles.showPrevious()})),i.Pb(3,"mat-icon",11),i.Tb(),i.Ub(4,"span",12),i.Kc(5),i.Tb(),i.Ub(6,"button",13),i.bc("click",(function(){return i.zc(n),i.fc(2).previewFiles.showNext()})),i.Pb(7,"mat-icon",14),i.Tb(),i.Tb(),i.Rb()}if(2&t){var a=e.ngIf;i.Bb(2),i.nc("disabled",!a.havePrevious),i.Bb(3),i.Nc("",a.pointer+1," of ",a.total,""),i.Bb(1),i.nc("disabled",!a.haveNext)}}function b(t,e){if(1&t){var n=i.Vb();i.Sb(0),i.Ub(1,"div",5),i.Kc(2),i.Tb(),i.Ic(3,p,8,4,"ng-container",1),i.gc(4,"async"),i.Ub(5,"div",6),i.Ub(6,"button",7),i.bc("click",(function(){return i.zc(n),i.fc().downloadFiles()})),i.Pb(7,"mat-icon",8),i.Tb(),i.lc(8),i.Tb(),i.Rb()}if(2&t){var a=e.ngIf,o=i.fc();i.Bb(2),i.Mc(" ",a.entry.name," "),i.Bb(1),i.nc("ngIf",i.hc(4,3,o.previewFiles.pagination())),i.Bb(3),i.nc("disabled",o.disableDownload)}}function f(t,e){if(1&t&&i.Pb(0,"img",17),2&t){var n=i.fc(2);i.nc("src",n.settings.getBaseUrl(!0)+n.settings.get("branding.logo_light"),i.Cc)}}function g(t,e){if(1&t&&(i.Ub(0,"a",15),i.Ic(1,f,1,1,"img",16),i.Tb()),2&t){var n=i.fc();i.Bb(1),i.nc("ngIf",n.showLogo&&n.settings.get("branding.logo_light"))}}var m,v,y,_=["*"],C=((m=function(){function t(e,n){_classCallCheck(this,t),this.previewFiles=e,this.settings=n,this.showLogo=!1,this.disableDownload=!1,this.showCloseButton=!1,this.closed=new i.n}return _createClass(t,[{key:"downloadFiles",value:function(){this.previewFiles.download.next()}}]),t}()).\u0275fac=function(t){return new(t||m)(i.Ob(s.a),i.Ob(c.a))},m.\u0275cmp=i.Ib({type:m,selectors:[["file-preview-toolbar"]],inputs:{showLogo:"showLogo",disableDownload:"disableDownload",showCloseButton:"showCloseButton"},outputs:{closed:"closed"},ngContentSelectors:_,decls:4,vars:5,consts:[["mat-icon-button","","class","back-button",3,"click",4,"ngIf"],[4,"ngIf"],["routerLink","/drive","class","logo",4,"ngIf"],["mat-icon-button","",1,"back-button",3,"click"],["svgIcon","arrow-back"],[1,"entry-name"],[1,"actions"],["mat-icon-button","",3,"disabled","click"],["svgIcon","file-download"],[1,"navigation"],["mat-icon-button","",1,"previous",3,"disabled","click"],["svgIcon","keyboard-arrow-left"],[1,"meta"],["mat-icon-button","",1,"next",3,"disabled","click"],["svgIcon","keyboard-arrow-right"],["routerLink","/drive",1,"logo"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(i.mc(),i.Ic(0,d,2,0,"button",0),i.Ic(1,b,9,5,"ng-container",1),i.gc(2,"async"),i.Ic(3,g,2,1,"a",2)),2&t&&(i.nc("ngIf",e.showCloseButton),i.Bb(1),i.nc("ngIf",i.hc(2,3,e.previewFiles.pagination())),i.Bb(2),i.nc("ngIf",e.showLogo&&e.settings.has("branding.logo_light")))},directives:[l.t,u.b,h.a],pipes:[l.b],styles:["file-preview-toolbar{position:fixed;top:0;left:0;display:flex;width:100%;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:linear-gradient(180deg,rgba(0,0,0,.65) 0,transparent);z-index:10}@media only screen and (max-width:550px){file-preview-toolbar{padding:0 5px}}file-preview-toolbar .entry-name{display:block;margin-right:25px;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width:550px){file-preview-toolbar .entry-name{max-width:calc(50% - 77.5px)}}file-preview-toolbar .entry-name file-icon{display:inline-block;vertical-align:bottom;margin-right:5px}@media only screen and (min-width:550px){file-preview-toolbar .navigation{position:absolute;left:50%;top:50%;margin-right:-50%;transform:translate(-50%,-50%)}}@media only screen and (max-width:550px){file-preview-toolbar .navigation{position:fixed;bottom:10px;left:5px}}file-preview-toolbar .actions{margin-left:auto;white-space:nowrap}file-preview-toolbar .actions a,file-preview-toolbar .actions button{margin:0 5px}file-preview-toolbar .close-button{margin-right:25px}file-preview-toolbar .logo{position:fixed;bottom:15px;right:15px;opacity:.2;width:150px;height:auto}file-preview-toolbar .logo img{width:100%;height:auto}file-preview-toolbar .mat-icon-button[disabled][disabled]{color:#737373}"],encapsulation:2,changeDetection:0}),m),k=n("ovFL"),w=["previewContainer"],x=["moreOptionsButton"],I=((y=function(){function t(e,n,i,a,o){_classCallCheck(this,t),this.el=e,this.overlayRef=n,this.previewFiles=i,this.settings=a,this.data=o,this.entries=[],this.entries=o.entries}return _createClass(t,[{key:"ngOnInit",value:function(){this.data.ticketEntry&&this.previewFiles.setPreviewUriTransformer(this.urlTransformer.bind(this))}},{key:"ngAfterViewInit",value:function(){var t=this;this.bindToDownload(),this.previewContainer.nativeElement.addEventListener("click",(function(e){e.target.closest(".preview-object")||t.overlayRef.close()}))}},{key:"ngOnDestroy",value:function(){this.downloadSub.unsubscribe()}},{key:"closeOverlay",value:function(){this.overlayRef.close()}},{key:"bindToDownload",value:function(){var t=this;this.downloadSub=this.previewFiles.download.subscribe((function(){var e=t.previewFiles.getAllEntries();t.downloadFile(e)}))}},{key:"downloadFile",value:function(t){var e=t.map((function(t){return t.hash})).join(","),n="".concat(this.settings.getBaseUrl(),"secure/uploads/download?hashes=").concat(e);this.data.ticketEntry&&(n+="&ticketEntry=true"),Object(o.a)(n)}},{key:"urlTransformer",value:function(t){return t.url+"?ticketEntry=true"}}]),t}()).\u0275fac=function(t){return new(t||y)(i.Ob(i.l),i.Ob(r.a),i.Ob(s.a),i.Ob(c.a),i.Ob(a.a))},y.\u0275cmp=i.Ib({type:y,selectors:[["file-preview-overlay"]],viewQuery:function(t,e){var n;1&t&&(i.Gc(w,!0,i.l),i.Rc(x,!0,i.l)),2&t&&(i.vc(n=i.cc())&&(e.previewContainer=n.first),i.vc(n=i.cc())&&(e.optionsButton=n.first))},decls:3,vars:2,consts:[[3,"showCloseButton","closed"],[3,"files"],["previewContainer",""]],template:function(t,e){1&t&&(i.Ub(0,"file-preview-toolbar",0),i.bc("closed",(function(){return e.closeOverlay()})),i.Tb(),i.Pb(1,"preview-container",1,2)),2&t&&(i.nc("showCloseButton",!0),i.Bb(1),i.nc("files",e.entries))},directives:[C,k.a],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background-color:rgba(0,0,0,.9);color:var(--be-accent-contrast);overflow:auto;position:relative}preview-container[_ngcontent-%COMP%]{margin:60px 0;min-height:calc(100% - 120px)}"],changeDetection:0}),y),O=((v=function(){function t(){_classCallCheck(this,t),this.iconsMap={text:"insert-drive-file",audio:"volume-up",video:"videocam",document:"assignment",image:"image"}}return _createClass(t,[{key:"getFileType",value:function(t){return t.split("/")[0]}},{key:"getIconName",value:function(t){var e=this.getFileType(t);return this.iconsMap[e]||this.iconsMap.text}}]),t}()).\u0275fac=function(t){return new(t||v)},v.\u0275prov=i.Kb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),P=n("dz5c"),T=n("h586"),U=n("6SKC");function S(t,e){if(1&t){var n=i.Vb();i.Ub(0,"button",6),i.bc("click",(function(t){i.zc(n);var e=i.fc().$implicit;return i.fc().detachEntry(e),t.stopPropagation()})),i.Pb(1,"mat-icon",7),i.Tb()}}function M(t,e){if(1&t){var n=i.Vb();i.Ub(0,"div",1),i.bc("click",(function(){i.zc(n);var t=e.$implicit;return i.fc().showPreviewOverlay(t)})),i.Pb(1,"mat-icon",2),i.Ub(2,"div",3),i.Kc(3),i.Tb(),i.Ub(4,"div",4),i.Kc(5),i.gc(6,"formattedFileSize"),i.Tb(),i.Ic(7,S,2,0,"button",5),i.Tb()}if(2&t){var a=e.$implicit,o=i.fc();i.Bb(1),i.nc("svgIcon",o.mime.getIconName(a.mime))("ngClass",o.mime.getIconName(a.mime)),i.Bb(2),i.Lc(a.name),i.Bb(2),i.Lc(i.hc(6,5,a.file_size)),i.Bb(2),i.nc("ngIf",o.cancelButtonVisible)}}var F,E=((F=function(){function t(e,n,a){_classCallCheck(this,t),this.mime=e,this.overlay=n,this.uploadQueue=a,this.cancelButtonVisible=!0,this.detached=new i.n}return _createClass(t,[{key:"detachEntry",value:function(t){var e=this.attachments.findIndex((function(e){return e.id===t.id}));e>-1&&(this.attachments.splice(e,1),this.detached.emit(t))}},{key:"showPreviewOverlay",value:function(t){this.overlay.open(I,{position:"center",origin:"global",data:{entries:[t],ticketEntry:!0}})}}]),t}()).\u0275fac=function(t){return new(t||F)(i.Ob(O),i.Ob(P.a),i.Ob(T.a))},F.\u0275cmp=i.Ib({type:F,selectors:[["reply-attachment-list"]],inputs:{attachments:"attachments",cancelButtonVisible:"cancelButtonVisible"},outputs:{detached:"detached"},decls:1,vars:1,consts:[["class","attachments-list-item",3,"click",4,"ngFor","ngForOf"],[1,"attachments-list-item",3,"click"],[1,"attachment-info","type-icon",3,"svgIcon","ngClass"],[1,"attachment-info","name"],[1,"attachment-info","size"],["class","remove-attachment","type","button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"remove-attachment",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&i.Ic(0,M,8,7,"div",0),2&t&&i.nc("ngForOf",e.attachments)},directives:[l.s,h.a,l.q,l.t,u.b],pipes:[U.a],styles:["reply-attachment-list{display:flex;flex-wrap:wrap;color:var(--be-secondary-text)}reply-attachment-list .attachments-list-item{border:1px solid var(--be-divider-default);margin:0 10px 10px 0;position:relative;height:45px;line-height:45px;border-radius:3px;flex:0 1 auto;min-width:200px;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}reply-attachment-list .attachments-list-item .attachment-info{display:inline-block;vertical-align:middle}reply-attachment-list .attachments-list-item .attachment-info svg{vertical-align:top}reply-attachment-list .attachments-list-item .attachment-info.name{max-width:115px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}reply-attachment-list .attachments-list-item .attachment-info.type-icon{margin-right:3px}reply-attachment-list .attachments-list-item .attachment-info.type-icon.image,reply-attachment-list .attachments-list-item .attachment-info.type-icon.videocam,reply-attachment-list .attachments-list-item .attachment-info.type-icon.volume-up{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.insert-drive-file{color:#4285f4}reply-attachment-list .attachments-list-item .attachment-info.type-icon.assignment{color:#0f9d58}reply-attachment-list .attachments-list-item .size{font-size:1.1rem;margin:0 10px 0 5px}"],encapsulation:2,changeDetection:0}),F)},A5z7:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return S})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return w})),n.d(e,"g",(function(){return L}));var i=n("FtGj"),a=n("fXoL"),o=n("FKr1"),r=n("ofXK"),s=n("8LU1"),c=n("XNiG"),l=n("VRyK"),u=n("IzEk"),h=n("1G5W"),d=n("JX91"),p=n("R1ws"),b=n("u47x"),f=n("0EQZ"),g=n("kmnG"),m=n("nLfN"),v=n("cH1L"),y=n("3Pt+"),_=["*"],C=Object(o.z)(Object(o.v)(Object(o.w)((function t(e){_classCallCheck(this,t),this._elementRef=e})),"primary"),-1),k=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Jb({type:t,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:[1,"mat-chip-avatar"]}),t}(),w=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Jb({type:t,selectors:[["mat-chip-trailing-icon"],["","matChipTrailingIcon",""]],hostAttrs:[1,"mat-chip-trailing-icon"]}),t}(),x=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r,s,l,u,h,d){var p;return _classCallCheck(this,n),(p=e.call(this,t))._elementRef=t,p._ngZone=i,p._changeDetectorRef=u,p._hasFocus=!1,p.chipListSelectable=!0,p._chipListMultiple=!1,p._chipListDisabled=!1,p._selected=!1,p._selectable=!0,p._disabled=!1,p._removable=!0,p._onFocus=new c.a,p._onBlur=new c.a,p.selectionChange=new a.n,p.destroyed=new a.n,p.removed=new a.n,p._addHostClassName(),p._chipRippleTarget=(d||document).createElement("div"),p._chipRippleTarget.classList.add("mat-chip-ripple"),p._elementRef.nativeElement.appendChild(p._chipRippleTarget),p._chipRipple=new o.s(_assertThisInitialized(p),i,p._chipRippleTarget,r),p._chipRipple.setupTriggerEvents(t),p.rippleConfig=s||{},p._animationsDisabled="NoopAnimations"===l,p.tabIndex=null!=h&&parseInt(h)||-1,p}return _createClass(n,[{key:"_addHostClassName",value:function(){var t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._markForCheck())}},{key:"toggleSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(t),this._markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(t){this.disabled?t.preventDefault():t.stopPropagation()}},{key:"_handleKeydown",value:function(t){if(!this.disabled)switch(t.keyCode){case i.e:case i.c:this.remove(),t.preventDefault();break;case i.v:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}},{key:"_blur",value:function(){var t=this;this._ngZone.onStable.asObservable().pipe(Object(u.a)(1)).subscribe((function(){t._ngZone.run((function(){t._hasFocus=!1,t._onBlur.next({chip:t})}))}))}},{key:"_dispatchSelectionChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}},{key:"_markForCheck",value:function(){this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}},{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(t){var e=Object(s.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(t){this._selectable=Object(s.c)(t)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(t){this._disabled=Object(s.c)(t)}},{key:"removable",get:function(){return this._removable},set:function(t){this._removable=Object(s.c)(t)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),n}(C);return t.\u0275fac=function(e){return new(e||t)(a.Ob(a.l),a.Ob(a.A),a.Ob(m.a),a.Ob(o.f,8),a.Ob(p.a,8),a.Ob(a.h),a.Zb("tabindex"),a.Ob(r.e,8))},t.\u0275dir=a.Jb({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){var i;1&t&&(a.Hb(n,k,!0),a.Hb(n,w,!0),a.Hb(n,I,!0)),2&t&&(a.vc(i=a.cc())&&(e.avatar=i.first),a.vc(i=a.cc())&&(e.trailingIcon=i.first),a.vc(i=a.cc())&&(e.removeIcon=i.first))},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&a.bc("click",(function(t){return e._handleClick(t)}))("keydown",(function(t){return e._handleKeydown(t)}))("focus",(function(){return e.focus()}))("blur",(function(){return e._blur()})),2&t&&(a.Cb("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),a.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[a.yb]}),t}(),I=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this._parentChip=e,n&&"BUTTON"===n.nativeElement.nodeName&&n.nativeElement.setAttribute("type","button")}return _createClass(t,[{key:"_handleClick",value:function(t){var e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Ob(x),a.Ob(a.l))},t.\u0275dir=a.Jb({type:t,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&a.bc("click",(function(t){return e._handleClick(t)}))}}),t}(),O=new a.r("mat-chips-default-options"),P=Object(o.y)((function t(e,n,i,a){_classCallCheck(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=a})),T=0,U=function t(e,n){_classCallCheck(this,t),this.source=e,this.value=n},S=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,r,s,l,u){var h;return _classCallCheck(this,n),(h=e.call(this,l,r,s,u))._elementRef=t,h._changeDetectorRef=i,h._dir=o,h.ngControl=u,h.controlType="mat-chip-list",h._lastDestroyedChipIndex=null,h._destroyed=new c.a,h._uid="mat-chip-list-"+T++,h._tabIndex=0,h._userTabIndex=null,h._onTouched=function(){},h._onChange=function(){},h._multiple=!1,h._compareWith=function(t,e){return t===e},h._required=!1,h._disabled=!1,h.ariaOrientation="horizontal",h._selectable=!0,h.change=new a.n,h.valueChange=new a.n,h.ngControl&&(h.ngControl.valueAccessor=_assertThisInitialized(h)),h}return _createClass(n,[{key:"ngAfterContentInit",value:function(){var t=this;this._keyManager=new b.g(this.chips).withWrap().withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(h.a)(this._destroyed)).subscribe((function(e){return t._keyManager.withHorizontalOrientation(e)})),this._keyManager.tabOut.pipe(Object(h.a)(this._destroyed)).subscribe((function(){t._allowFocusEscape()})),this.chips.changes.pipe(Object(d.a)(null),Object(h.a)(this._destroyed)).subscribe((function(){t.disabled&&Promise.resolve().then((function(){t._syncChipsState()})),t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips(),t.stateChanges.next()}))}},{key:"ngOnInit",value:function(){this._selectionModel=new f.b(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(t){this._chipInput=t}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"writeValue",value:function(t){this.chips&&this._setSelectionByValue(t,!1)}},{key:"registerOnChange",value:function(t){this._onChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this.stateChanges.next()}},{key:"onContainerClick",value:function(t){this._originatesFromChip(t)||this.focus()}},{key:"focus",value:function(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}},{key:"_focusInput",value:function(t){this._chipInput&&this._chipInput.focus(t)}},{key:"_keydown",value:function(t){var e=t.target;t.keyCode===i.c&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(t.keyCode===i.j?(this._keyManager.setFirstItemActive(),t.preventDefault()):t.keyCode===i.g?(this._keyManager.setLastItemActive(),t.preventDefault()):this._keyManager.onKeydown(t),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(t){return t>=0&&t<this.chips.length}},{key:"_isInputEmpty",value:function(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}},{key:"_setSelectionByValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach((function(t){return t.deselect()})),Array.isArray(t))t.forEach((function(t){return e._selectValue(t,n)})),this._sortValues();else{var i=this._selectValue(t,n);i&&n&&this._keyManager.setActiveItem(i)}}},{key:"_selectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.chips.find((function(n){return null!=n.value&&e._compareWith(n.value,t)}));return i&&(n?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}},{key:"_initializeSelection",value:function(){var t=this;Promise.resolve().then((function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())}))}},{key:"_clearSelection",value:function(t){this._selectionModel.clear(),this.chips.forEach((function(e){e!==t&&e.deselect()})),this.stateChanges.next()}},{key:"_sortValues",value:function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach((function(e){e.selected&&t._selectionModel.select(e)})),this.stateChanges.next())}},{key:"_propagateChanges",value:function(t){var e;e=Array.isArray(this.selected)?this.selected.map((function(t){return t.value})):this.selected?this.selected.value:t,this._value=e,this.change.emit(new U(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var t=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout((function(){t.focused||t._markAsTouched()})):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var t=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout((function(){t._tabIndex=t._userTabIndex||0,t._changeDetectorRef.markForCheck()})))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe((function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach((function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()})),e.isUserInput&&t._propagateChanges()}))}},{key:"_listenToChipsFocus",value:function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe((function(e){var n=t.chips.toArray().indexOf(e.chip);t._isValidIndex(n)&&t._keyManager.updateActiveItem(n),t.stateChanges.next()})),this._chipBlurSubscription=this.chipBlurChanges.subscribe((function(){t._blur(),t.stateChanges.next()}))}},{key:"_listenToChipsRemoved",value:function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe((function(e){var n=e.chip,i=t.chips.toArray().indexOf(e.chip);t._isValidIndex(i)&&n._hasFocus&&(t._lastDestroyedChipIndex=i)}))}},{key:"_originatesFromChip",value:function(t){for(var e=t.target;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips.some((function(t){return t._hasFocus}))}},{key:"_syncChipsState",value:function(){var t=this;this.chips&&this.chips.forEach((function(e){e._chipListDisabled=t._disabled,e._chipListMultiple=t.multiple}))}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(s.c)(t),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(s.c)(t),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&0===this.chips.length}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(s.c)(t),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(t){var e=this;this._selectable=Object(s.c)(t),this.chips&&this.chips.forEach((function(t){return t.chipListSelectable=e._selectable}))}},{key:"tabIndex",set:function(t){this._userTabIndex=t,this._tabIndex=t}},{key:"chipSelectionChanges",get:function(){return Object(l.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.selectionChange}))))}},{key:"chipFocusChanges",get:function(){return Object(l.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onFocus}))))}},{key:"chipBlurChanges",get:function(){return Object(l.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t._onBlur}))))}},{key:"chipRemoveChanges",get:function(){return Object(l.a).apply(void 0,_toConsumableArray(this.chips.map((function(t){return t.destroyed}))))}}]),n}(P);return t.\u0275fac=function(e){return new(e||t)(a.Ob(a.l),a.Ob(a.h),a.Ob(v.c,8),a.Ob(y.w,8),a.Ob(y.m,8),a.Ob(o.b),a.Ob(y.t,10))},t.\u0275cmp=a.Ib({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){var i;1&t&&a.Hb(n,x,!0),2&t&&a.vc(i=a.cc())&&(e.chips=i)},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&a.bc("focus",(function(){return e.focus()}))("blur",(function(){return e._blur()}))("keydown",(function(t){return e._keydown(t)})),2&t&&(a.Xb("id",e._uid),a.Cb("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),a.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[a.Ab([{provide:g.c,useExisting:t}]),a.yb],ngContentSelectors:_,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(a.mc(),a.Ub(0,"div",0),a.lc(1),a.Tb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t}(),M=0,F=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this._elementRef=e,this._defaultOptions=n,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new a.n,this.placeholder="",this.id="mat-chip-list-input-"+M++,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}return _createClass(t,[{key:"ngOnChanges",value:function(){this._chipList.stateChanges.next()}},{key:"_keydown",value:function(t){t&&t.keyCode===i.x&&!Object(i.B)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}},{key:"_blur",value:function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}},{key:"_focus",value:function(){this.focused=!0,this._chipList.stateChanges.next()}},{key:"_emitChipEnd",value:function(t){!this._inputElement.value&&t&&this._chipList._keydown(t),t&&!this._isSeparatorKey(t)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}},{key:"_onInput",value:function(){this._chipList.stateChanges.next()}},{key:"focus",value:function(t){this._inputElement.focus(t)}},{key:"_isSeparatorKey",value:function(t){if(Object(i.B)(t))return!1;var e=this.separatorKeyCodes,n=t.keyCode;return Array.isArray(e)?e.indexOf(n)>-1:e.has(n)}},{key:"chipList",set:function(t){t&&(this._chipList=t,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(t){this._addOnBlur=Object(s.c)(t)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(t){this._disabled=Object(s.c)(t)}},{key:"empty",get:function(){return!this._inputElement.value}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Ob(a.l),a.Ob(O))},t.\u0275dir=a.Jb({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&a.bc("keydown",(function(t){return e._keydown(t)}))("blur",(function(){return e._blur()}))("focus",(function(){return e._focus()}))("input",(function(){return e._onInput()})),2&t&&(a.Xb("id",e.id),a.Cb("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[a.zb]}),t}(),E={separatorKeyCodes:[i.h]},L=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},providers:[o.b,{provide:O,useValue:E}]}),t}()},F96W:function(t,e,n){"use strict";function i(t){var e=Object.assign({},t);return Object.keys(e).forEach((function(t){return(null==e[t]||""===e[t])&&delete e[t]})),e}n.d(e,"a",(function(){return i}))},GSRO:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("ofXK"),a=n("bTqV"),o=n("NFeN"),r=n("bv9b"),s=n("fXoL"),c=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.c,a.c,r.b,o.b]]}),t}()},KKQg:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var i,a,o=n("mrSG"),r=n("fXoL"),s=n("kmQS"),c=n("5o4b"),l=n("OnlV"),u=n("VaLf"),h=((i=function(){function t(e,n,i,a,o){_classCallCheck(this,t),this.settings=e,this.zone=n,this.lazyLoader=i,this.breakpoints=a,this.i18n=o,this.makeBootstrapPromise()}return _createClass(t,[{key:"reset",value:function(){this.editorIsReady()&&(this.tinymceInstance.setContent(""),this.tinymceInstance.undoManager.clear())}},{key:"focus",value:function(){var t=this;this.waitForEditor().then((function(){t.tinymceInstance.focus(!1)}))}},{key:"hasUndo",value:function(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasUndo()}},{key:"hasRedo",value:function(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasRedo()}},{key:"queryCommandState",value:function(t){return this.editorIsReady()&&this.tinymceInstance.queryCommandState(t)}},{key:"execCommand",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.waitForEditor().then((function(){e.zone.run((function(){e.tinymceInstance.execCommand(t,!1,n)}))}))}},{key:"getContents",value:function(t){return this.editorIsReady()?this.tinymceInstance.getContent(t):""}},{key:"setContents",value:function(t){var e=this;this.waitForEditor().then((function(){e.tinymceInstance.undoManager&&(e.tinymceInstance.undoManager.transact((function(){e.tinymceInstance.setContent(t)})),e.tinymceInstance.selection.setCursorLocation(),e.tinymceInstance.nodeChanged(),e.tinymceInstance.execCommand("mceResize"))}))}},{key:"insertContents",value:function(t){var e=this;this.waitForEditor().then((function(){e.tinymceInstance.execCommand("mceInsertContent",!1,t),setTimeout((function(){return e.tinymceInstance.selection.collapse()}))}))}},{key:"insertImage",value:function(t){var e=this;this.waitForEditor().then((function(){e.insertContents('<img src="'+t+'"/>'),setTimeout((function(){return e.execCommand("mceAutoResize")}),500)}))}},{key:"waitForEditor",value:function(){var t=this;return this.tinymceInstance?new Promise((function(e){return e(t.tinymceInstance)})):this.bootstrapPromise?this.bootstrapPromise:void 0}},{key:"setConfig",value:function(t){var e=this;this.config=t,this.loadTinymce().then((function(){e.initTinymce()}))}},{key:"editorIsReady",value:function(){return!this.bootstrapPromise&&!!this.tinymceInstance&&!!this.tinymceInstance.undoManager}},{key:"loadTinymce",value:function(){return this.lazyLoader.loadAsset("js/tinymce/tinymce.min.js",{type:"js"})}},{key:"initTinymce",value:function(){var t=this,e={target:this.config.textAreaEl.nativeElement,plugins:["link","codesample","paste","autoresize"],branding:!1,browser_spellcheck:!0,max_height:this.config.maxHeight,min_height:this.config.minHeight,autoresize_on_init:!1,paste_as_text:!0,elementpath:!1,statusbar:!1,entity_encoding:"raw",menubar:!1,convert_urls:!1,forced_root_block:!1,document_base_url:document.baseURI,element_format:"html",body_class:"editor-body",content_style:'html {font-size: 62.5%;}\n.editor-body {font-size: 1.4rem;font-family: "Roboto", "Helvetica Neue", sans-serif;color: rgba(0, 0, 0, .87);}\nimg {max-width: 100%}\ncode[class*=language-], pre[class*=language-] {font-size: inherit;} .mce-preview-object {border: none;}',content_css:["https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic"],default_link_target:"_blank",link_assume_external_targets:!0,target_list:!1,link_title:!1,image_dimensions:!1,image_description:!1,setup:function(e){t.tinymceInstance=e,e.on("change",(function(){return t.config.onChange.emit(e.getContent())})),e.on("click",(function(){t.zone.run((function(){}))})),e.shortcuts.add("ctrl+13","desc",(function(){t.zone.run((function(){t.config.onChange.emit(e.getContent()),t.config.onCtrlEnter.emit()}))}))},init_instance_callback:function(){t.bootstrapPromise=!1,t.bootstrapPromiseResolve(t.tinymceInstance)}};if(this.breakpoints.isMobile$.value||(e.toolbar=!1),this.config.showAdvancedControls&&(e.plugins=e.plugins.concat(["media","hr","visualblocks","visualchars","wordcount"]),e.forced_root_block="p",e.statusbar=!0,e.autoresize_on_init=!0,e.extended_valid_elements="svg[*],use[*],iframe[src|frameborder|width|height|allow=*|allowfullscreen],script[src]",e.elementpath=!0,e.content_css.push(this.settings.getAssetUrl()+"css/advanced-editor-styles.css"),e.target_list=[{title:this.i18n.t("Current window"),value:""},{title:this.i18n.t("New Window"),value:"_blank"}]),"auto"===this.config.minHeight){var n=this.config.editorEl.nativeElement.parentElement.offsetHeight-74-4;e.min_height=n,e.max_height=n}tinymce.init(e)}},{key:"destroyEditor",value:function(){try{this.tinymceInstance&&this.tinymceInstance.remove(),this.tinymceInstance=null,this.makeBootstrapPromise()}catch(t){}}},{key:"makeBootstrapPromise",value:function(){var t=this;this.bootstrapPromise=new Promise((function(e){return t.bootstrapPromiseResolve=e}))}}]),t}()).\u0275fac=function(t){return new(t||i)(r.Yb(s.a),r.Yb(r.A),r.Yb(c.a),r.Yb(l.a),r.Yb(u.a))},i.\u0275prov=r.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),d=n("Lm4C"),p=n("h586"),b=n("QeDF"),f=n("JYI4"),g=n("WmcL"),m=n("3Pt+"),v=n("Kj3r"),y=n("W5HX"),_=n("twBr"),C=n("dz5c"),k=n("sJvS"),w=n("tU2R"),x=n("PCqb"),I=n("JWVf"),O=((a=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).DEFAULT_MAX_SIZE_MB=3,t}return _createClass(n,[{key:"initValidations",value:function(){var t,e=[new w.a({maxSize:Object(x.a)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new I.a({types:["image"]},this.i18n)];(t=this.validations).push.apply(t,e)}}]),n}(k.a)).\u0275fac=function(t){return P(t||a)},a.\u0275prov=r.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),P=r.Wb(O),T=n("ofXK"),U=n("Qu3c"),S=n("NFeN"),M=n("STbY"),F=n("Rd8u"),E=n("zW5C"),L=["visualArea"],B=["sourceArea"];function j(t,e){if(1&t){var n=r.Vb();r.Ub(0,"div",3),r.Ub(1,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().openFileUploadDialog()})),r.gc(2,"trans"),r.Pb(3,"mat-icon",19),r.Tb(),r.Tb()}2&t&&(r.Bb(1),r.nc("matTooltip",r.hc(2,1,"Add Attachment")))}function A(t,e){if(1&t){var n=r.Vb();r.Ub(0,"div",3),r.Ub(1,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("codesample")})),r.gc(2,"trans"),r.Pb(3,"mat-icon",20),r.Tb(),r.Tb()}2&t&&(r.Bb(1),r.nc("matTooltip",r.hc(2,1,"Insert Code Sample")))}function R(t,e){if(1&t){var n=r.Vb();r.Ub(0,"button",23),r.bc("click",(function(){return r.zc(n),r.fc(2).openInsertImageModal()})),r.gc(1,"trans"),r.Pb(2,"mat-icon",24),r.Tb()}2&t&&r.nc("matTooltip",r.hc(1,1,"Insert Image"))}function z(t,e){if(1&t){var n=r.Vb();r.Ub(0,"div",3),r.Ub(1,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("mceLink")})),r.gc(2,"trans"),r.Pb(3,"mat-icon",21),r.Tb(),r.Ic(4,R,3,3,"button",22),r.Tb()}if(2&t){var i=r.fc();r.Bb(1),r.Fb("active",i.queryCommandState("link")),r.nc("matTooltip",r.hc(2,4,"Insert Link")),r.Bb(3),r.nc("ngIf",i.currentUser.hasPermission("files.create"))}}function D(t,e){if(1&t){var n=r.Vb();r.Ub(0,"div",1),r.Ub(1,"div",3),r.Ub(2,"button",25),r.Ub(3,"span",26),r.Kc(4,"Insert"),r.Tb(),r.Pb(5,"mat-icon",27),r.Tb(),r.Ub(6,"mat-menu",null,28),r.Ub(8,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("InsertHorizontalRule")})),r.Pb(9,"mat-icon",30),r.Ub(10,"span",26),r.Kc(11,"Horizontal Line"),r.Tb(),r.Tb(),r.Ub(12,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("mceLink")})),r.Pb(13,"mat-icon",21),r.Ub(14,"span",26),r.Kc(15,"Link"),r.Tb(),r.Tb(),r.Ub(16,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("mceMedia")})),r.Pb(17,"mat-icon",31),r.Ub(18,"span",26),r.Kc(19,"Media"),r.Tb(),r.Tb(),r.Ub(20,"div",32),r.bc("click",(function(){return r.zc(n),r.fc().insertInfoContainer("important")})),r.Pb(21,"mat-icon",33),r.Ub(22,"span",26),r.Kc(23,"Important"),r.Tb(),r.Tb(),r.Ub(24,"div",32),r.bc("click",(function(){return r.zc(n),r.fc().insertInfoContainer("warning")})),r.Pb(25,"mat-icon",34),r.Ub(26,"span",26),r.Kc(27,"Warning"),r.Tb(),r.Tb(),r.Ub(28,"div",32),r.bc("click",(function(){return r.zc(n),r.fc().insertInfoContainer("note")})),r.Pb(29,"mat-icon",35),r.Ub(30,"span",26),r.Kc(31,"Note"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(32,"div",3),r.Ub(33,"button",36),r.Ub(34,"span",26),r.Kc(35,"Format"),r.Tb(),r.Pb(36,"mat-icon",27),r.Tb(),r.Ub(37,"mat-menu",37,38),r.Ub(39,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("FormatBlock","h1")})),r.Ub(40,"div",39),r.Kc(41,"Heading 1"),r.Tb(),r.Ub(42,"div",40),r.Kc(43,"Ctrl+Alt+1"),r.Tb(),r.Tb(),r.Ub(44,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("FormatBlock","h2")})),r.Ub(45,"div",39),r.Kc(46,"Heading 2"),r.Tb(),r.Ub(47,"div",40),r.Kc(48,"Ctrl+Alt+2"),r.Tb(),r.Tb(),r.Ub(49,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("FormatBlock","h3")})),r.Ub(50,"div",39),r.Kc(51,"Heading 3"),r.Tb(),r.Ub(52,"div",40),r.Kc(53,"Ctrl+Alt+3"),r.Tb(),r.Tb(),r.Ub(54,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("strikethrough")})),r.Ub(55,"div",39),r.Kc(56,"Strikethrough"),r.Tb(),r.Ub(57,"div",40),r.Kc(58,"Alt+Shift+5"),r.Tb(),r.Tb(),r.Ub(59,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("superscript")})),r.Ub(60,"div",39),r.Kc(61,"Superscript"),r.Tb(),r.Ub(62,"div",40),r.Kc(63,"Ctrl+."),r.Tb(),r.Tb(),r.Ub(64,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("subscript")})),r.Ub(65,"div",39),r.Kc(66,"Subscript"),r.Tb(),r.Ub(67,"div",40),r.Kc(68,"Ctrl+,"),r.Tb(),r.Tb(),r.Ub(69,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("mceBlockQuote")})),r.Ub(70,"div",39),r.Kc(71,"Blockquote"),r.Tb(),r.Ub(72,"div",40),r.Kc(73,"Ctrl+Alt+B"),r.Tb(),r.Tb(),r.Ub(74,"div",29),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("FormatBlock","p")})),r.Ub(75,"div",39),r.Kc(76,"Paragraph"),r.Tb(),r.Ub(77,"div",40),r.Kc(78,"Ctrl+Alt+0"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(79,"div",3),r.Ub(80,"button",41,42),r.Ub(82,"span",26),r.Kc(83,"Color"),r.Tb(),r.Pb(84,"mat-icon",27),r.Tb(),r.Ub(85,"mat-menu",43,44),r.Ub(87,"div",45),r.bc("click",(function(){r.zc(n);var t=r.wc(81);return r.fc().showColorPicker("ForeColor",t)})),r.Pb(88,"mat-icon",46),r.Ub(89,"span",26),r.Kc(90,"Text Color"),r.Tb(),r.Tb(),r.Ub(91,"div",47),r.bc("click",(function(){r.zc(n);var t=r.wc(81);return r.fc().showColorPicker("HiliteColor",t)})),r.Pb(92,"mat-icon",48),r.Ub(93,"span",26),r.Kc(94,"Background Color"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(95,"div",3),r.Ub(96,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("justifyLeft")})),r.gc(97,"trans"),r.Pb(98,"mat-icon",49),r.Tb(),r.Ub(99,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("justifyCenter")})),r.gc(100,"trans"),r.Pb(101,"mat-icon",50),r.Tb(),r.Ub(102,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("justifyRight")})),r.gc(103,"trans"),r.Pb(104,"mat-icon",51),r.Tb(),r.Tb(),r.Ub(105,"div",3),r.Ub(106,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("Outdent")})),r.gc(107,"trans"),r.Pb(108,"mat-icon",52),r.Tb(),r.Ub(109,"button",4),r.bc("click",(function(){return r.zc(n),r.fc().execCommand("Indent")})),r.gc(110,"trans"),r.Pb(111,"mat-icon",53),r.Tb(),r.Tb(),r.Ub(112,"div",54),r.Ub(113,"button",55),r.bc("click",(function(){return r.zc(n),r.fc().showVisualEditor()})),r.Kc(114,"Visual "),r.Tb(),r.Ub(115,"button",56),r.bc("click",(function(){return r.zc(n),r.fc().showSourceEditor()})),r.Kc(116,"Source "),r.Tb(),r.Tb(),r.Tb()}if(2&t){var i=r.wc(7),a=r.wc(38),o=r.wc(86),s=r.fc();r.Bb(2),r.nc("matMenuTriggerFor",i),r.Bb(31),r.nc("matMenuTriggerFor",a),r.Bb(47),r.nc("matMenuTriggerFor",o),r.Bb(16),r.Fb("active",s.queryCommandState("justifyLeft")),r.nc("matTooltip",r.hc(97,18,"Align Left")),r.Bb(3),r.Fb("active",s.queryCommandState("justifyCenter")),r.nc("matTooltip",r.hc(100,20,"Center")),r.Bb(3),r.Fb("active",s.queryCommandState("justifyRight")),r.nc("matTooltip",r.hc(103,22,"Align Right")),r.Bb(4),r.nc("matTooltip",r.hc(107,24,"Decrease Indent")),r.Bb(3),r.nc("matTooltip",r.hc(110,26,"Increase Indent")),r.Bb(4),r.Fb("active","visual"===s.activeEditor),r.Bb(2),r.Fb("active","source"===s.activeEditor)}}var V,$=[[["","customButtons",""]],[["","header",""]],[["","footer",""]]],K=["[customButtons]","[header]","[footer]"],N=((V=function(){function t(e,n,i,a,o,s,c,l){_classCallCheck(this,t),this.editor=e,this.currentUser=n,this.uploadQueue=i,this.settings=a,this.renderer=o,this.el=s,this.overlayPanel=c,this.imageValidator=l,this.sourceAreaControl=new m.i,this.activeEditor="visual",this.showAdvancedControls=!1,this.basic=!1,this.minHeight=183,this.maxHeight=530,this.onChange=new r.n,this.onCtrlEnter=new r.n,this.onFileUpload=new r.n}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.bootTextEditor()}},{key:"ngOnDestroy",value:function(){this.destroyEditor()}},{key:"reset",value:function(){this.editor.reset()}},{key:"focus",value:function(){this.editor.focus()}},{key:"hasUndo",value:function(){return this.editor.hasUndo()}},{key:"hasRedo",value:function(){return this.editor.hasRedo()}},{key:"queryCommandState",value:function(t){return this.editor.queryCommandState(t)}},{key:"execCommand",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.editor.execCommand(t,e)}},{key:"insertInfoContainer",value:function(t){this.insertContents('<div class="widget widget-'.concat(t,'"><div class="title">').concat(Object(g.a)(t),":</div><br></div><br>"))}},{key:"showColorPicker",value:function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,s=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.e(10).then(n.bind(null,"0PT2"));case 2:a=i.sent,o=a.BeColorPickerModule,this.overlayPanel.open(o.components.panel,{origin:new r.l(e),position:f.a}).valueChanged().pipe(Object(v.a)(50)).subscribe((function(e){s.execCommand(t,e)}));case 5:case"end":return i.stop()}}),i,this)})))}},{key:"showVisualEditor",value:function(){this.editor.tinymceInstance.contentAreaContainer&&"visual"!==this.activeEditor&&(this.activeEditor="visual",this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","block"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","none"),this.editor.focus())}},{key:"showSourceEditor",value:function(){this.editor.tinymceInstance.contentAreaContainer&&"source"!==this.activeEditor&&(this.activeEditor="source",this.renderer.setStyle(this.sourceTextArea.nativeElement,"height",this.editor.tinymceInstance.contentAreaContainer.offsetHeight+"px"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","block"),this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","none"),this.sourceAreaControl.setValue(this.editor.getContents({source_view:!0})))}},{key:"openFileUploadDialog",value:function(){var t=this;Object(d.a)({multiple:!0}).then((function(e){t.onFileUpload.emit(e)}))}},{key:"openInsertImageModal",value:function(){var t=this,e={uri:y.a.Image,validator:this.imageValidator,httpParams:{diskPrefix:this.inlineUploadPrefix}};Object(d.a)({types:[b.a.image]}).then((function(n){t.uploadQueue.start(n,e).subscribe((function(e){t.insertImage(e.fileEntry.url)}))}))}},{key:"getContents",value:function(){return this.editor.getContents()}},{key:"setContents",value:function(t){this.editor.setContents(t)}},{key:"insertContents",value:function(t){this.editor.insertContents(t)}},{key:"insertImage",value:function(t){this.editor.insertImage(t)}},{key:"insertLink",value:function(t){this.insertContents('<a href="'.concat(t.href,'" target="').concat(t.target||"self",'">').concat(t.text,"</a>"))}},{key:"destroyEditor",value:function(){this.editor.destroyEditor()}},{key:"bootTextEditor",value:function(){this.editor.setConfig({textAreaEl:this.visualTextArea,editorEl:this.el,minHeight:this.minHeight,maxHeight:this.maxHeight,onChange:this.onChange,onCtrlEnter:this.onCtrlEnter,showAdvancedControls:this.showAdvancedControls})}}]),t}()).\u0275fac=function(t){return new(t||V)(r.Ob(h),r.Ob(_.a),r.Ob(p.a),r.Ob(s.a),r.Ob(r.G),r.Ob(r.l),r.Ob(C.a),r.Ob(O))},V.\u0275cmp=r.Ib({type:V,selectors:[["text-editor"]],viewQuery:function(t,e){var n;1&t&&(r.Gc(L,!0),r.Gc(B,!0)),2&t&&(r.vc(n=r.cc())&&(e.visualTextArea=n.first),r.vc(n=r.cc())&&(e.sourceTextArea=n.first))},inputs:{showAdvancedControls:"showAdvancedControls",basic:"basic",minHeight:"minHeight",maxHeight:"maxHeight",inlineUploadPrefix:"inlineUploadPrefix"},outputs:{onChange:"onChange",onCtrlEnter:"onCtrlEnter",onFileUpload:"onFileUpload"},features:[r.Ab([p.a,h])],ngContentSelectors:K,decls:41,vars:47,consts:[[1,"editor-header"],[1,"toolbar-row"],["class","header-actions",4,"ngIf"],[1,"header-actions"],["type","button",1,"no-style","editor-button",3,"matTooltip","click"],["svgIcon","undo"],["svgIcon","redo"],["svgIcon","format-bold"],["svgIcon","format-italic"],["svgIcon","format-underlined"],["svgIcon","format-list-bulleted"],["svgIcon","format-list-numbered"],[1,"header-actions","last"],["svgIcon","format-clear"],["class","toolbar-row",4,"ngIf"],["rows","8",1,"source-textarea",2,"display","none",3,"formControl","blur"],["sourceArea",""],["rows","8",1,"visual-textarea"],["visualArea",""],["svgIcon","attachment"],["svgIcon","code"],["svgIcon","link"],["type","button","class","no-style editor-button image-modal-button",3,"matTooltip","click",4,"ngIf"],["type","button",1,"no-style","editor-button","image-modal-button",3,"matTooltip","click"],["svgIcon","image"],["type","button",1,"no-style","editor-button","text-button","insert-button",3,"matMenuTriggerFor"],["trans",""],["svgIcon","arrow-drop-down",1,"caret"],["insertMenu",""],["mat-menu-item","",3,"click"],["svgIcon","remove"],["svgIcon","videocam"],["mat-menu-item","","trans","",3,"click"],["svgIcon","star"],["svgIcon","warning"],["svgIcon","note"],["type","button",1,"no-style","editor-button","text-button","format-button",3,"matMenuTriggerFor"],[1,"format-menu","menu-with-alt-text"],["formatMenu",""],["trans","",1,"text"],[1,"alt-text"],["type","button",1,"no-style","editor-button","text-button","color-button",3,"matMenuTriggerFor"],["colorPickerOrigin",""],[1,"color-dropdown"],["colorMenu",""],["mat-menu-item","",1,"text-color-item",3,"click"],["svgIcon","format-color-text"],["mat-menu-item","",1,"bg-color-item",3,"click"],["svgIcon","format-color-fill"],["svgIcon","format-align-left"],["svgIcon","format-align-center"],["svgIcon","format-align-right"],["svgIcon","format-indent-decrease"],["svgIcon","format-indent-increase"],[1,"header-actions","editor-toggle-buttons"],["type","button","trans","",1,"no-style","editor-button","visual-mode-button",3,"click"],["type","button","trans","",1,"no-style","editor-button","source-mode-button",3,"click"]],template:function(t,e){1&t&&(r.mc($),r.Ub(0,"div",0),r.Ub(1,"div",1),r.Ic(2,j,4,3,"div",2),r.Ic(3,A,4,3,"div",2),r.Ub(4,"div",3),r.Ub(5,"button",4),r.bc("click",(function(){return e.execCommand("undo")})),r.gc(6,"trans"),r.Pb(7,"mat-icon",5),r.Tb(),r.Ub(8,"button",4),r.bc("click",(function(){return e.execCommand("redo")})),r.gc(9,"trans"),r.Pb(10,"mat-icon",6),r.Tb(),r.Tb(),r.Ub(11,"div",3),r.Ub(12,"button",4),r.bc("click",(function(){return e.execCommand("bold")})),r.gc(13,"trans"),r.Pb(14,"mat-icon",7),r.Tb(),r.Ub(15,"button",4),r.bc("click",(function(){return e.execCommand("italic")})),r.gc(16,"trans"),r.Pb(17,"mat-icon",8),r.Tb(),r.Ub(18,"button",4),r.bc("click",(function(){return e.execCommand("underline")})),r.gc(19,"trans"),r.Pb(20,"mat-icon",9),r.Tb(),r.Tb(),r.Ub(21,"div",3),r.Ub(22,"button",4),r.bc("click",(function(){return e.execCommand("insertunorderedlist")})),r.gc(23,"trans"),r.Pb(24,"mat-icon",10),r.Tb(),r.Ub(25,"button",4),r.bc("click",(function(){return e.execCommand("insertorderedlist")})),r.gc(26,"trans"),r.Pb(27,"mat-icon",11),r.Tb(),r.Tb(),r.Ic(28,z,5,6,"div",2),r.lc(29),r.Ub(30,"div",12),r.Ub(31,"button",4),r.bc("click",(function(){return e.execCommand("removeformat")})),r.gc(32,"trans"),r.Pb(33,"mat-icon",13),r.Tb(),r.Tb(),r.lc(34,1),r.Tb(),r.Ic(35,D,117,28,"div",14),r.Tb(),r.Ub(36,"textarea",15,16),r.bc("blur",(function(){return e.setContents(e.sourceAreaControl.value)})),r.Tb(),r.Pb(38,"textarea",17,18),r.lc(40,2)),2&t&&(r.Bb(2),r.nc("ngIf",e.inlineUploadPrefix&&e.currentUser.hasPermission("files.create")&&e.onFileUpload.observers.length),r.Bb(1),r.nc("ngIf",!e.basic),r.Bb(2),r.Fb("disabled",!e.hasUndo()),r.nc("matTooltip",r.hc(6,31,"Undo")),r.Bb(3),r.Fb("disabled",!e.hasRedo()),r.nc("matTooltip",r.hc(9,33,"Redo")),r.Bb(4),r.Fb("active",e.queryCommandState("bold")),r.nc("matTooltip",r.hc(13,35,"Bold")),r.Bb(3),r.Fb("active",e.queryCommandState("italic")),r.nc("matTooltip",r.hc(16,37,"Italic")),r.Bb(3),r.Fb("active",e.queryCommandState("underline")),r.nc("matTooltip",r.hc(19,39,"Underline")),r.Bb(4),r.Fb("active",e.queryCommandState("unorderedlist")),r.nc("matTooltip",r.hc(23,41,"Unordered List")),r.Bb(3),r.Fb("active",e.queryCommandState("orderedlist")),r.nc("matTooltip",r.hc(26,43,"Ordered List")),r.Bb(3),r.nc("ngIf",!e.basic),r.Bb(3),r.nc("matTooltip",r.hc(32,45,"Remove Formatting")),r.Bb(4),r.nc("ngIf",e.showAdvancedControls),r.Bb(1),r.Hc("min-height",e.minHeight),r.nc("formControl",e.sourceAreaControl),r.Bb(2),r.Hc("min-height",e.minHeight))},directives:[T.t,U.a,S.a,m.d,m.u,m.j,M.d,F.a,M.e,M.b],pipes:[E.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:218px;max-height:600px;position:relative;border:1px solid var(--be-divider-default);border-radius:4px;overflow:hidden}[_nghost-%COMP%]     .editor-button{color:#788593;padding:7px;width:36px;height:36px}[_nghost-%COMP%]     .editor-button .mat-icon{height:22px;width:22px}[_nghost-%COMP%]     .editor-button .caret{display:inline-block;width:20px;height:20px;vertical-align:middle}[_nghost-%COMP%]     .editor-button.text-button{display:block;font-weight:300;font-size:1.5rem;width:auto}[_nghost-%COMP%]     .editor-button.disabled{opacity:.4}[_nghost-%COMP%]     .editor-button.active{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-button.success{color:var(--be-accent-default)}[_nghost-%COMP%]     .editor-button:hover{background-color:rgba(0,0,0,.04)}[_nghost-%COMP%]     .editor-footer{position:relative;height:37px;flex-shrink:0;background-color:var(--be-background-alternative);border-top:1px solid var(--be-divider-default)}textarea[_ngcontent-%COMP%]{border:none;outline:none;resize:none;padding:15px}.editor-header[_ngcontent-%COMP%]{clear:both;flex:0 0 37px;background-color:var(--be-background-alternative)}.toolbar-row[_ngcontent-%COMP%]{display:flex;height:37px;border-bottom:1px solid var(--be-divider-default);overflow:hidden}  .header-actions{display:inline-block;border-right:1px solid var(--be-divider-default);height:100%;padding:0 4px}  .header-actions.right{margin-left:auto;margin-right:7px}  .header-actions.last{border-right:none}.editor-toggle-buttons[_ngcontent-%COMP%]{border-right:none;margin-left:auto;padding:0;display:flex}.editor-toggle-buttons[_ngcontent-%COMP%]   .editor-button[_ngcontent-%COMP%]{width:auto}@media only screen and (max-width:768px){.editor-header[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),V)},W5HX:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t){return t.Image="uploads/images",t}({})},XZLl:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("itxp"),o=n("/w9p"),r=n("kmQS"),s=n("LRXf"),c=n("jhN1"),l=n("twBr"),u=function(){var t=function(){function t(e,n,a,o,r,s){_classCallCheck(this,t),this.file=e,this.transformer=n,this.settings=a,this.http=o,this.sanitizer=r,this.currentUser=s,this.filePreviewWrapper=!0,this.download=new i.n}return _createClass(t,[{key:"getSrc",value:function(){return this.transformer(this.file)}},{key:"getSafeSrc",value:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getSrc())}},{key:"getContents",value:function(){return this.http.get(this.getSrc(),null,{responseType:"text"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Ob(a.a),i.Ob(o.a),i.Ob(r.a),i.Ob(s.a),i.Ob(c.b),i.Ob(l.a))},t.\u0275dir=i.Jb({type:t,hostVars:2,hostBindings:function(t,e){2&t&&i.Fb("file-preview-wrapper",e.filePreviewWrapper)}}),t}()},ZiO8:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("XZLl"),a=n("fXoL"),o=n("ofXK"),r=n("bTqV");function s(t,e){if(1&t){var n=a.Vb();a.Ub(0,"button",3),a.bc("click",(function(){return a.zc(n),a.fc().download.emit()})),a.Kc(1,"Download"),a.Tb()}}var c=function(){var t=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return _createClass(n,[{key:"getMessage",value:function(){return this.message||"No file preview available."}}]),n}(i.a);return t.\u0275fac=function(e){return l(e||t)},t.\u0275cmp=a.Ib({type:t,selectors:[["default-preview"]],inputs:{message:"message"},features:[a.yb],decls:4,vars:2,consts:[[1,"panel","preview-object"],["trans","",1,"message"],["mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Kc(2),a.Tb(),a.Ic(3,s,2,0,"button",2),a.Tb()),2&t&&(a.Bb(2),a.Lc(e.getMessage()),a.Bb(1),a.nc("ngIf",e.download.observers.length))},directives:[o.t,r.b],styles:["[_nghost-%COMP%]{display:block;max-width:380px;max-height:150px}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--be-background);color:var(--be-text);border-radius:4px;width:100%;height:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.message[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:15px}.mat-raised-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}(),l=a.Wb(c)},h586:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i,a,o=n("XNiG"),r=n("2Vo4"),s=n("jtHE"),c=n("oJgS"),l=function(){function t(e,n){_classCallCheck(this,t),this.canceled$=new o.a,this.processing$=new r.a(!1),this.uploadedResponse$=new s.a(1),this.progress$=new r.a({percentage:0}),this.error$=new r.a(null),this.customData={},this.uploadedFile=e,this.id=n||Object(c.a)()}return _createClass(t,[{key:"cancel",value:function(){this.canceled$.next(!0),this.finalize()}},{key:"complete",value:function(){this.setProgress({percentage:100,eta:null}),this.finalize()}},{key:"finalize",value:function(){this.uploadedResponse$.complete(),this.canceled$.complete(),this.progress$.complete()}},{key:"finishProcessing",value:function(){this.processing$.next(!1),this.processing$.complete()}},{key:"addError",value:function(t){this.error$.next(t)}},{key:"setProgress",value:function(t){this.progress$.next(Object.assign(Object.assign({},this.progress$.value),t))}},{key:"completed",get:function(){return!this.processing$.value&&100===this.progress$.value.percentage}},{key:"inProgress",get:function(){return!this.error$.value&&!this.completed}}]),t}(),u=n("Cfvw"),h=n("z6cu"),d=n("EY2u"),p=n("5+tZ"),b=n("JIr8"),f=n("1G5W"),g=n("lJxs"),m=n("pLZG"),v=n("JfjL"),y=n("VfAk"),_=n("fXoL"),C=n("oVOl"),k=n("sJvS"),w=n("tU2R"),x=n("1MND"),I=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var a;return _classCallCheck(this,n),(a=e.call(this)).params=t,a.i18n=i,a.errorMessage=a.i18n.t("Only these file types are allowed: :extensions",{extensions:a.params.extensions.join(", ")}),a}return _createClass(n,[{key:"fails",value:function(t){return!this.params.extensions.some((function(e){return e.toLowerCase()===t.extension.toLowerCase()}))}}]),n}(x.a),O=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var a;return _classCallCheck(this,n),(a=e.call(this)).params=t,a.i18n=i,a.errorMessage=a.i18n.t("These file types are not allowed: :extensions",{extensions:a.params.extensions.join(", ")}),a}return _createClass(n,[{key:"fails",value:function(t){return this.params.extensions.some((function(e){return e===t.extension}))}}]),n}(x.a),P=n("PCqb"),T=((i=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).DEFAULT_MAX_FILE_SIZE_MB=8,t.showToast=!0,t}return _createClass(n,[{key:"initValidations",value:function(){this.validations.push(new w.a({maxSize:this.getMaxFileSize()},this.i18n));var t=this.getAllowedExtensions(),e=this.getBlockedExtensions();t&&t.length&&this.validations.push(new I({extensions:t},this.i18n)),e&&e.length&&this.validations.push(new O({extensions:e},this.i18n))}},{key:"getMaxFileSize",value:function(){return this.settings.get("uploads.max_size",Object(P.a)(this.DEFAULT_MAX_FILE_SIZE_MB,"MB"))}},{key:"getAllowedExtensions",value:function(){return this.settings.getJson("uploads.allowed_extensions")}},{key:"getBlockedExtensions",value:function(){return this.settings.getJson("uploads.blocked_extensions")}}]),n}(k.a)).\u0275fac=function(t){return U(t||i)},i.\u0275prov=_.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),U=_.Wb(T),S=n("i2dy"),M=n("twBr"),F=n("kmQS"),E=((a=function(){function t(e,n,i,a,c){_classCallCheck(this,t),this.api=e,this.defaultValidator=n,this.toast=i,this.currentUser=a,this.settings=c,this.uploads$=new r.a([]),this.totalProgress$=new s.a(1),this.uploadsAdded$=new o.a,this.count$=new r.a({pending:0,completed:0})}return _createClass(t,[{key:"isEmpty",value:function(){return!this.uploads$.value.length}},{key:"getAllCompleted",value:function(){return this.uploads$.value.filter((function(t){return t.completed})).map((function(t){return t.fileEntry}))}},{key:"updateTotalProgress",value:function(){var t=this.uploads$.value.map((function(t){return t.progress$.value.percentage||0}));this.totalProgress$.next(t.reduce((function(t,e){return t+e}),0)/t.length)}},{key:"totalProgress",value:function(){return this.totalProgress$.asObservable()}},{key:"start",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.validator||this.defaultValidator,a=[];if(Array.isArray(t))a=this.transformUploads(t,i),this.uploads$.next(this.uploads$.value.concat(a)),this.uploadsAdded$.next(a);else{var o=this.uploads$.value.map((function(n){if(t[n.id]){var o=e.transformUploads([t[n.id]],i,n.id)[0];return a.push(o),o}return n}));this.uploads$.next(o)}return this.updateCount(),Object(u.a)(a.filter((function(t){return!t.error$.value}))).pipe(Object(p.a)((function(t){return e.api.upload(t.uploadedFile,n).pipe(Object(b.a)((function(a){return e.handleUploadFailure(a,t,i),n.bubbleError?Object(h.a)(a):d.a})),Object(f.a)(t.canceled$),Object(g.a)((function(i){return e.handleUploadEvent(i,t,n.willProcessFiles),i.name===v.a.COMPLETED&&(i.body.queueItemId=t.id),i})))}),1),Object(m.a)((function(t){return t.name===v.a.COMPLETED})),Object(g.a)((function(t){return t.body})))}},{key:"updateProgress",value:function(t,e){var n=this.find(t);n&&(n.setProgress({eta:e.eta,speed:e.speed,percentage:e.progress,totalBytes:e.totalBytes,completedBytes:e.completedBytes}),this.updateTotalProgress())}},{key:"completeUpload",value:function(t,e){var n=this.find(t);n&&(n.uploadedResponse$.next(e),n.fileEntry=e.fileEntry,n.complete(),this.updateTotalProgress())}},{key:"errorUpload",value:function(t,e){this.find(t).addError(e)}},{key:"reset",value:function(){this.uploads$.value.forEach((function(t){return t.cancel()})),this.uploads$.next([])}},{key:"remove",value:function(t){var e=this.uploads$.value.findIndex((function(e){return e.id===t})),n=this.uploads$.value[e];n.completed?n.finalize():n.cancel(),this.uploads$.value.splice(e,1),this.uploads$.next(this.uploads$.value)}},{key:"find",value:function(t){return this.uploads$.value.find((function(e){return e.id===t}))}},{key:"transformUploads",value:function(t,e,n){return t.map((function(t){var i=new l(t,n);if(e){var a=e.validate(t);a.failed&&i.addError(a.errorMessage)}return i}))}},{key:"handleUploadEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.name===v.a.PROGRESS?(100===t.progress&&(t=Object.assign(Object.assign({},t),{progress:99}),n&&e.processing$.next(!0)),this.updateProgress(e.id,t)):t.name===v.a.COMPLETED&&(this.completeUpload(e.id,t.body),this.updateCount())}},{key:"handleUploadFailure",value:function(t,e,n){var i,a=null===(i=null==t?void 0:t.errors)||void 0===i?void 0:i.file,o=null;a||(a=y.a.DefaultUpload,o=this.currentUser.isAdmin()&&!this.settings.get("site.hide_docs_buttons")),this.errorUpload(e.id,a),this.updateCount(),this.updateTotalProgress(),n.showToast&&this.toast.open(a,{action:o?"Learn More":null}).onAction().subscribe((function(){window.open(y.b)}))}},{key:"updateCount",value:function(){var t=this.uploads$.value.filter((function(t){return t.inProgress})).length;this.count$.next({pending:t,completed:this.uploads$.value.length-t})}}]),t}()).\u0275fac=function(t){return new(t||a)(_.Yb(C.a),_.Yb(T),_.Yb(S.b),_.Yb(M.a),_.Yb(F.a))},a.\u0275prov=_.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},itxp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("fXoL").r)("CURRENT_PREVIEW_FILE")},k3xQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t}()},ovFL:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),a=n("7LS1"),o=n("ofXK"),r=n("+rOU");function s(t,e){}function c(t,e){if(1&t){var n=i.Vb();i.Sb(0),i.Ic(1,s,0,0,"ng-template",1),i.bc("attached",(function(t){return i.zc(n),i.fc().listenForDownloadClick(t)})),i.Rb()}if(2&t){var a=e.ngIf;i.Bb(1),i.nc("cdkPortalOutlet",a)}}var l=function(){var t=function(){function t(e){_classCallCheck(this,t),this.previewFiles=e,this.disableDownload=!1}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.previewFiles.set(this.files,this.activeFile)}},{key:"ngOnDestroy",value:function(){this.previewFiles.destroy(),this.downloadSub&&this.downloadSub.unsubscribe()}},{key:"listenForDownloadClick",value:function(t){var e=this;this.downloadSub&&this.downloadSub.unsubscribe(),this.disableDownload||(this.downloadSub=t.instance.download.subscribe((function(){e.previewFiles.download.next()})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Ob(a.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["preview-container"]],inputs:{files:"files",activeFile:"activeFile",disableDownload:"disableDownload"},features:[i.zb],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cdkPortalOutlet","attached"]],template:function(t,e){1&t&&(i.Ic(0,c,2,1,"ng-container",0),i.gc(1,"async")),2&t&&i.nc("ngIf",i.hc(1,1,e.previewFiles.getPortal()))},directives:[o.t,r.c],pipes:[o.b],styles:["[_nghost-%COMP%]{display:flex;width:100%;min-height:100%;align-items:center;justify-content:center;position:relative;overflow:hidden}  .file-preview-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}"],changeDetection:0}),t}()},rG4v:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("eNwd"),a=n("7o/Q"),o=n("D0XW");n("l7GE"),n("ZUHj");var r={leading:!0,trailing:!1},s=function(){function t(e,n,i,a){_classCallCheck(this,t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=a}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,a,o,r){var s;return _classCallCheck(this,n),(s=e.call(this,t)).duration=i,s.scheduler=a,s.leading=o,s.trailing=r,s._hasTrailingValue=!1,s._trailingValue=null,s}return _createClass(n,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),n}(a.a);function l(t){t.subscriber.clearThrottle()}var u,h=n("fXoL"),d=n("h586"),p=n("bv9b"),b=((u=function(){function t(e,n,a){var c=this;_classCallCheck(this,t),this.el=e,this.uploadQueue=n,this.cd=a,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return function(i){return i.lift(new s(t,e,n.leading,n.trailing))}}(260,i.a,{leading:!0,trailing:!0})).subscribe((function(t){c.progress=t,c.hidden=100===t||0===c.uploadQueue.count$.value.pending,c.cd.markForCheck()}))}return _createClass(t,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||u)(h.Ob(h.l),h.Ob(d.a),h.Ob(h.h))},u.\u0275cmp=h.Ib({type:u,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&h.Fb("hidden",e.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(t,e){1&t&&h.Pb(0,"mat-progress-bar",0),2&t&&h.nc("value",e.progress)},directives:[p.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),u)},rcZy:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("3Pt+"),a=n("pLZG"),o=n("lJxs"),r=n("fXoL"),s=n("2hX1"),c=n("ofXK"),l=n("bTqV"),u=n("NFeN"),h=n("Rd8u"),d=n("zW5C");function p(t,e){if(1&t&&(r.Ub(0,"div",6),r.Ub(1,"div",7),r.Kc(2,"Items per page"),r.Tb(),r.Ub(3,"div",8),r.Ub(4,"select",9),r.Ub(5,"option",10),r.Kc(6,"10"),r.Tb(),r.Ub(7,"option",10),r.Kc(8,"15"),r.Tb(),r.Ub(9,"option",10),r.Kc(10,"20"),r.Tb(),r.Ub(11,"option",10),r.Kc(12,"50"),r.Tb(),r.Ub(13,"option",10),r.Kc(14,"100"),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){var n=r.fc();r.Bb(4),r.nc("formControl",n.perPageControl),r.Bb(1),r.nc("ngValue",10),r.Bb(2),r.nc("ngValue",15),r.Bb(2),r.nc("ngValue",20),r.Bb(2),r.nc("ngValue",50),r.Bb(2),r.nc("ngValue",100)}}function b(t,e){if(1&t&&(r.Ub(0,"div",11),r.Kc(1),r.gc(2,"trans"),r.Tb()),2&t){var n=r.fc();r.Bb(1),r.Pc(" ",n.from," - ",n.to," ",r.hc(2,4,"of")," ",n.totalRecords," ")}}var f=function(){var t=function(){function t(e,n){_classCallCheck(this,t),this.datable=e,this.cd=n,this.hidePerPage=!1,this.perPageControl=new i.i(15)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.changeRef=this.datable.paginator.response$.pipe(Object(a.a)((function(t){return!!(null==t?void 0:t.pagination)})),Object(o.a)((function(t){return t.pagination}))).subscribe((function(e){t.to=e.per_page*e.current_page,t.from=t.to-e.per_page||1,t.totalRecords=e.total,t.havePrevious=e.current_page>1,t.haveNext=e.current_page<e.last_page,t.perPageControl.setValue(parseInt(""+e.per_page),{emitEvent:!1}),t.cd.markForCheck()})),this.perPageControl.valueChanges.subscribe((function(e){t.datable.paginator.changePerPage(e)}))}},{key:"ngOnDestroy",value:function(){this.changeRef.unsubscribe(),this.datable.destroy()}},{key:"previousPage",value:function(){this.datable.paginator.previousPage()}},{key:"nextPage",value:function(){this.datable.paginator.nextPage()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Ob(s.a),r.Ob(r.h))},t.\u0275cmp=r.Ib({type:t,selectors:[["datatable-footer"]],inputs:{hidePerPage:"hidePerPage"},decls:9,vars:8,consts:[["class","page-size",4,"ngIf"],[1,"range-actions"],["class","range-label",4,"ngIf"],["type","button","mat-icon-button","",1,"range-button",3,"disabled","click"],["svgIcon","chevron-left"],["svgIcon","chevron-right"],[1,"page-size"],["trans","",1,"page-size-label"],[1,"input-container"],[1,"page-size-input",3,"formControl"],[3,"ngValue"],[1,"range-label"]],template:function(t,e){1&t&&(r.Ic(0,p,15,6,"div",0),r.Ub(1,"div",1),r.Ic(2,b,3,6,"div",2),r.Ub(3,"button",3),r.bc("click",(function(){return e.previousPage()})),r.gc(4,"async"),r.Pb(5,"mat-icon",4),r.Tb(),r.Ub(6,"button",3),r.bc("click",(function(){return e.nextPage()})),r.gc(7,"async"),r.Pb(8,"mat-icon",5),r.Tb(),r.Tb()),2&t&&(r.nc("ngIf",!e.hidePerPage),r.Bb(2),r.nc("ngIf",e.from&&e.to&&e.totalRecords),r.Bb(1),r.nc("disabled",!e.havePrevious||r.hc(4,4,e.datable.paginator.loading$)),r.Bb(3),r.nc("disabled",!e.haveNext||r.hc(7,6,e.datable.paginator.loading$)))},directives:[c.t,l.b,u.a,h.a,i.G,i.u,i.j,i.z,i.J],pipes:[c.b,d.a],styles:["[_nghost-%COMP%]{padding:0 8px;justify-content:flex-end;flex-wrap:wrap-reverse;width:100%;height:56px}.page-size[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;align-items:center}.page-size[_ngcontent-%COMP%]{margin-right:8px}.page-size-label[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--be-secondary-text);margin:0 4px}.input-container[_ngcontent-%COMP%]{width:auto}.page-size-input[_ngcontent-%COMP%]{width:60px;height:33px;padding:4px;margin:0 4px}.range-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.range-label[_ngcontent-%COMP%]{margin:0 32px 0 24px;font-size:1.2rem}.range-button[_ngcontent-%COMP%], .range-label[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.range-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}"],changeDetection:0}),t}()},tTc1:function(t,e,n){"use strict";function i(t,e){var n=document.createElement("a");n.href=t,e&&(n.download=e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}n.d(e,"a",(function(){return i}))},vUXK:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return R}));var i=n("fXoL"),a=n("2Vo4"),o=n("XZLl"),r=n("ofXK"),s=n("ZiO8");function c(t,e){1&t&&i.Pb(0,"default-preview",2)}function l(t,e){if(1&t&&(i.Ub(0,"div",3),i.Ub(1,"pre"),i.Kc(2),i.gc(3,"async"),i.Tb(),i.Tb()),2&t){var n=i.fc();i.Bb(2),i.Lc(i.hc(3,1,n.content$))}}var u,h=((u=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).content$=new a.a(""),t.fileTooLarge$=new a.a(!1),t}return _createClass(n,[{key:"ngOnInit",value:function(){this.file.file_size>5242880?this.fileTooLarge$.next(!0):this.loadFileContents()}},{key:"loadFileContents",value:function(){var t=this;this.getContents().subscribe((function(e){t.content$.next(e)}))}}]),n}(o.a)).\u0275fac=function(t){return d(t||u)},u.\u0275cmp=i.Ib({type:u,selectors:[["text-preview"]],features:[i.yb],decls:4,vars:4,consts:[["message","This file is too large to preview.",4,"ngIf","ngIfElse"],["textPreview",""],["message","This file is too large to preview."],[1,"text-wrapper","preview-object"]],template:function(t,e){if(1&t&&(i.Ic(0,c,1,0,"default-preview",0),i.gc(1,"async"),i.Ic(2,l,4,3,"ng-template",null,1,i.Jc)),2&t){var n=i.wc(3);i.nc("ngIf",i.hc(1,2,e.fileTooLarge$))("ngIfElse",n)}},directives:[r.t,s.a],pipes:[r.b],styles:["[_nghost-%COMP%]{display:block;width:80%;min-height:80%}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}.text-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--be-background);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;color:var(--be-text);padding:20px;overflow:auto}.text-wrapper[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{word-wrap:break-word}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;margin:0;font-size:1.4rem;font-family:inherit}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),u),d=i.Wb(h),p=["playerEl"];function b(t,e){1&t&&i.Pb(0,"default-preview")}var f,g=((f=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).invalidMedia=!1,t}return _createClass(n,[{key:"ngOnInit",value:function(){this.invalidMedia=!this.canPlayVideo(),this.invalidMedia||(this.player().src=this.getSrc(),this.player().play())}},{key:"canPlayVideo",value:function(){return!!this.player().canPlayType(this.file.mime)}},{key:"player",value:function(){return this.playerEl.nativeElement}}]),n}(o.a)).\u0275fac=function(t){return m(t||f)},f.\u0275cmp=i.Ib({type:f,selectors:[["audio-preview"]],viewQuery:function(t,e){var n;1&t&&i.Gc(p,!0),2&t&&i.vc(n=i.cc())&&(e.playerEl=n.first)},features:[i.yb],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(i.Pb(0,"audio",0,1),i.Ic(2,b,1,0,"default-preview",2)),2&t&&(i.Fb("hidden",e.invalidMedia),i.Bb(2),i.nc("ngIf",e.invalidMedia))},directives:[r.t,s.a],styles:["[_nghost-%COMP%]{display:block;max-width:80%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}audio[_ngcontent-%COMP%]{display:block;max-width:100%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);max-height:60px}audio[_ngcontent-%COMP%], default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),f),m=i.Wb(g);function v(t,e){1&t&&i.Pb(0,"default-preview")}var y,_,C,k=((y=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(g)).\u0275fac=function(t){return w(t||y)},y.\u0275cmp=i.Ib({type:y,selectors:[["video-preview"]],features:[i.yb],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(i.Pb(0,"video",0,1),i.Ic(2,v,1,0,"default-preview",2)),2&t&&(i.Fb("hidden",e.invalidMedia),i.Bb(2),i.nc("ngIf",e.invalidMedia))},directives:[r.t,s.a],styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}video[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}default-preview[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),y),w=i.Wb(k),x=((_=function(t){_inherits(n,t);var e=_createSuper(n);function n(){return _classCallCheck(this,n),e.apply(this,arguments)}return n}(o.a)).\u0275fac=function(t){return I(t||_)},_.\u0275cmp=i.Ib({type:_,selectors:[["image-preview"]],features:[i.yb],decls:1,vars:1,consts:[[1,"preview-object",3,"src"]],template:function(t,e){1&t&&i.Pb(0,"img",0),2&t&&i.nc("src",e.getSafeSrc(),i.Cc)},styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--be-background)}"],changeDetection:0}),_),I=i.Wb(x),O=((C=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).className="preview-object",t}return _createClass(n,[{key:"getSrc",value:function(){return _get(_getPrototypeOf(n.prototype),"getSrc",this).call(this)+"#toolbar=0"}}]),n}(o.a)).\u0275fac=function(t){return P(t||C)},C.\u0275cmp=i.Ib({type:C,selectors:[["pdf-preview"]],hostVars:2,hostBindings:function(t,e){2&t&&i.Db(e.className)},features:[i.yb],decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&i.Pb(0,"iframe",0),2&t&&i.nc("src",e.getSafeSrc(),i.Bc)},styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{border:none}"],changeDetection:0}),C),P=i.Wb(O),T=n("XFMS"),U=n("FBzJ"),S=["iframe"];function M(t,e){if(1&t){var n=i.Vb();i.Sb(0),i.Pb(1,"iframe",3,4),i.Ub(3,"div",5),i.bc("click",(function(){return i.zc(n),i.fc().openInNewWindow()})),i.Tb(),i.Rb()}}function F(t,e){1&t&&i.Pb(0,"default-preview")}var E,L,B=((E=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.apply(this,arguments)).loading$=new a.a(!0),t.showDefaultPreview$=new a.a(!1),t}return _createClass(n,[{key:"ngAfterViewInit",value:function(){var t=this;if(this.file.file_size>25e6)return this.showDefaultPreview();this.iframe.nativeElement.onload=function(){clearTimeout(t.timeoutRef),t.stopLoading()},this.getIframeSrc().then((function(e){t.iframe.nativeElement.src=e})).catch((function(){t.showDefaultPreview()})),this.timeoutRef=setTimeout((function(){t.showDefaultPreview()}),5e3)}},{key:"stopLoading",value:function(){this.loading$.next(!1)}},{key:"showDefaultPreview",value:function(){this.stopLoading(),this.showDefaultPreview$.next(!0)}},{key:"openInNewWindow",value:function(){window.open(window.location.href,"_blank")}},{key:"getIframeSrc",value:function(){var t=this;return new Promise((function(e,n){var i=t.getSrc();-1===i.indexOf("shareable_link")?t.http.post("uploads/".concat(t.file.id,"/add-preview-token")).subscribe((function(n){i+="?preview_token="+n.preview_token,e(t.getGoogleDocsUrl(i))}),(function(){return n})):e(t.getGoogleDocsUrl(i))}))}},{key:"getGoogleDocsUrl",value:function(t){return t=Object(T.a)(t)?t:this.settings.getBaseUrl()+t,"https://docs.google.com/gview?embedded=true&url="+encodeURIComponent(t)}}]),n}(o.a)).\u0275fac=function(t){return j(t||E)},E.\u0275cmp=i.Ib({type:E,selectors:[["google-docs-viewer"]],viewQuery:function(t,e){var n;1&t&&i.Rc(S,!0),2&t&&i.vc(n=i.cc())&&(e.iframe=n.first)},features:[i.yb],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["defaultPreview",""],[1,"overlay",3,"isVisible"],[1,"preview-object"],["iframe",""],[1,"pop-out-block",3,"click"]],template:function(t,e){if(1&t&&(i.Ic(0,M,4,0,"ng-container",0),i.gc(1,"async"),i.Ic(2,F,1,0,"ng-template",null,1,i.Jc),i.Pb(4,"loading-indicator",2),i.gc(5,"async")),2&t){var n=i.wc(3);i.nc("ngIf",!i.hc(1,3,e.showDefaultPreview$))("ngIfElse",n),i.Bb(4),i.nc("isVisible",i.hc(5,5,e.loading$))}},directives:[r.t,U.a,s.a],pipes:[r.b],styles:["[_nghost-%COMP%]{display:block;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}[_nghost-%COMP%], iframe[_ngcontent-%COMP%]{width:100%;height:100%}iframe[_ngcontent-%COMP%]{border:none}loading-indicator.overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:transparent}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}.pop-out-block[_ngcontent-%COMP%]{width:40px;height:40px;position:absolute;top:12px;right:12px;cursor:pointer}"],changeDetection:0}),E),j=i.Wb(B),A=new i.r("AVAILABLE_PREVIEWS"),R=((L=function t(){_classCallCheck(this,t),this.text=h,this.video=k,this.audio=g,this.image=x,this.pdf=O,this.spreadsheet=B,this.powerPoint=B,this.word=B}).\u0275fac=function(t){return new(t||L)},L.\u0275prov=i.Kb({token:L,factory:L.\u0275fac}),L)}}]);