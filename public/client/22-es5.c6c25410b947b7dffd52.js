function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,a=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"sO/H":function(t,e,n){"use strict";n.r(e),n.d(e,"HcManageModule",(function(){return De}));var a,i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),c=n("0IaG"),l=n("fXoL"),s=n("Rd8u"),u=n("bTqV"),b=n("NFeN"),d=((a=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.model={}}return _createClass(t,[{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||a)(l.Ob(c.h),l.Ob(c.a))},a.\u0275cmp=l.Ib({type:a,selectors:[["article-settings-modal"]],decls:28,vars:1,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","article-slug","trans",""],["type","text","id","article-slug","formControlName","slug"],["for","article-description","trans",""],["name","article-description","id","article-description","rows","7","formControlName","description"],["trans",""],["for","article-position","trans",""],["type","number","id","article-position","name","article-position","formControlName","position","min","0"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Kc(2,"Article Settings"),l.Tb(),l.Ub(3,"button",2),l.bc("click",(function(){return e.close()})),l.Pb(4,"mat-icon",3),l.Tb(),l.Tb(),l.Ub(5,"form",4),l.bc("ngSubmit",(function(){return e.close()})),l.Ub(6,"mat-dialog-content",5),l.Ub(7,"div",6),l.Ub(8,"label",7),l.Kc(9,"Slug"),l.Tb(),l.Pb(10,"input",8),l.Tb(),l.Ub(11,"div",6),l.Ub(12,"label",9),l.Kc(13,"Description"),l.Tb(),l.Pb(14,"textarea",10),l.Ub(15,"p",11),l.Kc(16,"This will appear when searching the help center. Excerpt from article will be used otherwise."),l.Tb(),l.Tb(),l.Ub(17,"div",6),l.Ub(18,"label",12),l.Kc(19,"Position"),l.Tb(),l.Pb(20,"input",13),l.Ub(21,"p",11),l.Kc(22,"Order for article on help center homepage. Lower position will be first."),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"mat-dialog-actions"),l.Ub(24,"button",14),l.bc("click",(function(){return e.close()})),l.Kc(25,"Cancel"),l.Tb(),l.Ub(26,"button",15),l.Kc(27,"Confirm"),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(5),l.nc("formGroup",e.data.form))},directives:[c.i,s.a,u.b,b.a,o.v,o.m,c.f,o.d,o.u,o.k,o.A,c.c],encapsulation:2}),a);function g(t,e){if(!t||!e)return!1;e=e.toLowerCase(),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)if(t[n].toLowerCase().indexOf(e)>-1)return!0;return!1}var p=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"filter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(!t)return e.slice();for(var n=[],a=0;a<e.length;a++){var i=Object.assign({},e[a]);g(e[a].name,t)?n.push(i):(i.children=i.children.filter((function(e){return g(e.name,t)})),i.children.length&&n.push(i))}return n}}]),t}(),h=n("YdAL"),f=n("vkgz"),m=n("w1tV"),v=n("Kj3r"),y=n("/uUt"),k=n("Ndfy"),C=n("ahrr"),x=n("Qu3c"),T=n("bSwM"),_=n("zW5C");function w(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",15),l.Ub(1,"mat-checkbox",13),l.bc("change",(function(){l.zc(n);var t=e.$implicit,a=l.fc().$implicit;return l.fc().toggle(t,a.id)})),l.Kc(2),l.Tb(),l.Tb()}if(2&t){var a=e.$implicit,i=e.index,o=l.fc().index,r=l.fc();l.Bb(1),l.nc("id",o+""+i)("checked",r.categoryIsSelected(a.id)),l.Bb(1),l.Lc(a.name)}}function U(t,e){if(1&t){var n=l.Vb();l.Sb(0),l.Ub(1,"div",12),l.Ub(2,"mat-checkbox",13),l.bc("change",(function(){l.zc(n);var t=e.$implicit;return l.fc().toggle(t)})),l.Kc(3),l.Tb(),l.Tb(),l.Ic(4,w,3,3,"div",14),l.Rb()}if(2&t){var a=e.$implicit,i=e.index,o=l.fc();l.Bb(2),l.nc("id",i)("checked",o.categoryIsSelected(a.id)||o.childIsSelected(a)),l.Bb(1),l.Lc(a.name),l.Bb(1),l.nc("ngForOf",a.children)}}function O(t,e){1&t&&(l.Ub(0,"div",16),l.Kc(1,"No Results Found."),l.Tb())}var I,P,B=["*"],M=((I=function(){function t(e,n){_classCallCheck(this,t),this.api=e,this.storage=n,this.searchControl=new o.i,this.selectedCategories=[],this.filteredCategories=[],this.allCategories=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.bindSearchQuery(),this.allCategories.length||this.refresh()}},{key:"writeValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectedCategories=t.length?t:this.storage.get("selectedCategories",[])}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"refresh",value:function(){var t=this,e=this.api.getCategories().pipe(Object(f.a)((function(e){t.filteredCategories=e.categories,t.allCategories=e.categories})),Object(m.a)());return e.subscribe(),e}},{key:"categoryIsSelected",value:function(t){return this.selectedCategories.indexOf(t)>-1}},{key:"childIsSelected",value:function(t){if(!t.children.length)return!1;for(var e=0;e<t.children.length;e++)if(this.categoryIsSelected(t.children[e].id))return!0}},{key:"toggle",value:function(t,e){var n=this.selectedCategories.indexOf(t.id);n>-1?this.selectedCategories.splice(n,1):this.selectedCategories.push(t.id),e&&!this.categoryIsSelected(e)&&this.selectedCategories.push(e),this.deselectChildren(t),this.storage.set("selectedCategories",this.selectedCategories),this.propagateChange(this.selectedCategories)}},{key:"deselectAll",value:function(){this.selectedCategories=[],this.storage.set("selectedCategories",[]),this.propagateChange(this.selectedCategories)}},{key:"deselectChildren",value:function(t){var e=this;t.children&&t.children.forEach((function(t){var n=e.selectedCategories.indexOf(t.id);n>-1&&e.selectedCategories.splice(n,1)}))}},{key:"bindSearchQuery",value:function(){var t=this;this.searchControl.valueChanges.pipe(Object(v.a)(400),Object(y.a)()).subscribe((function(e){t.filteredCategories=(new p).filter(e,t.allCategories),t.scrollbar.update()}))}}]),t}()).\u0275fac=function(t){return new(t||I)(l.Ob(k.a),l.Ob(C.a))},I.\u0275cmp=l.Ib({type:I,selectors:[["categories-manager"]],viewQuery:function(t,e){var n;1&t&&l.Gc(h.a,!0),2&t&&l.vc(n=l.cc())&&(e.scrollbar=n.first)},features:[l.Ab([{provide:o.s,useExisting:I,multi:!0}])],ngContentSelectors:B,decls:15,vars:6,consts:[[1,"panel"],[1,"panel-header"],["trans",""],["mat-icon-button","",1,"clear-all-button",3,"matTooltip","click"],["svgIcon","clear-all"],[1,"panel-body"],[1,"input-container"],["type","text","id","categories-manager-search","placeholder","Search...","trans-placeholder","",3,"formControl"],["svgIcon","search"],[1,"categories"],[4,"ngFor","ngForOf"],["class","no-results","trans","",4,"ngIf"],[1,"category","parent-category"],[3,"id","checked","change"],["class","category child-category",4,"ngFor","ngForOf"],[1,"category","child-category"],["trans","",1,"no-results"]],template:function(t,e){1&t&&(l.mc(),l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"span",2),l.Kc(3,"Categories"),l.Tb(),l.Ub(4,"button",3),l.bc("click",(function(){return e.deselectAll()})),l.gc(5,"trans"),l.Pb(6,"mat-icon",4),l.Tb(),l.Tb(),l.Ub(7,"div",5),l.Ub(8,"div",6),l.Pb(9,"input",7),l.Pb(10,"mat-icon",8),l.Tb(),l.Ub(11,"section",9),l.Ic(12,U,5,4,"ng-container",10),l.Ic(13,O,2,0,"div",11),l.Tb(),l.lc(14),l.Tb(),l.Tb()),2&t&&(l.Bb(4),l.nc("matTooltip",l.hc(5,4,"Clear All")),l.Bb(5),l.nc("formControl",e.searchControl),l.Bb(3),l.nc("ngForOf",e.filteredCategories),l.Bb(1),l.nc("ngIf",!e.filteredCategories.length&&e.searchControl.value))},directives:[s.a,u.b,x.a,b.a,o.d,o.u,o.j,i.s,i.t,T.a],pipes:[_.a],styles:["categories-manager{display:block}categories-manager .input-container{margin-bottom:10px;position:relative}categories-manager .input-container input{padding-left:33px}categories-manager .input-container .mat-icon{position:absolute;top:12px;left:7px;color:var(--be-secondary-text)}categories-manager .categories{max-height:250px;overflow:auto;padding:10px;border:1px solid var(--be-divider-default)}categories-manager .categories .category{margin-bottom:8px;overflow:hidden;text-overflow:ellipsis}categories-manager .categories .child-category{margin-left:20px}categories-manager .categories .parent-category label{font-weight:500}categories-manager .categories .no-results{font-style:italic;font-size:1.3rem}"],encapsulation:2}),I),A=n("J0Ic"),L=((P=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.hydrate()}return _createClass(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"hydrate",value:function(){this.article=this.data.article}}]),t}()).\u0275fac=function(t){return new(t||P)(l.Ob(c.h),l.Ob(c.a))},P.\u0275cmp=l.Ib({type:P,selectors:[["article-modal"]],decls:4,vars:1,consts:[["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"article"]],template:function(t,e){1&t&&(l.Ub(0,"mat-dialog-content"),l.Ub(1,"button",0),l.bc("click",(function(){return e.close()})),l.Pb(2,"mat-icon",1),l.Tb(),l.Pb(3,"article",2),l.Tb()),2&t&&(l.Bb(3),l.nc("article",e.article))},directives:[c.f,u.b,b.a,A.a],styles:[".article-modal-container{width:80%;height:calc(100% - 50px)}.article-modal-container .mat-dialog-container,.article-modal-container .mat-dialog-content{height:100%;max-height:100%}.article-modal-container .close-button{position:absolute;top:0;right:20px}"],encapsulation:2}),P),D=n("Lm4C"),K=n("QeDF"),S=n("h586"),F=n("IuoX"),V=n("i2dy"),j=n("1jcm");function R(t,e){1&t&&(l.Ub(0,"span",26),l.Kc(1,"Update Category"),l.Tb())}function z(t,e){1&t&&(l.Ub(0,"span",26),l.Kc(1,"New Category"),l.Tb())}function G(t,e){if(1&t&&(l.Ub(0,"div",29),l.Kc(1),l.Tb()),2&t){var n=l.fc();l.Bb(1),l.Lc(n.errors.name)}}function N(t,e){if(1&t&&(l.Ub(0,"div",30),l.Kc(1),l.Tb()),2&t){var n=l.fc();l.Bb(1),l.Lc(n.errors.image)}}function E(t,e){if(1&t&&(l.Ub(0,"option",31),l.Kc(1),l.Tb()),2&t){var n=e.$implicit;l.nc("value",n.id),l.Bb(1),l.Lc(n.name)}}function Q(t,e){if(1&t&&(l.Ub(0,"div",32),l.Kc(1),l.Tb()),2&t){var n=l.fc();l.Bb(1),l.Lc(n.errors.parent_id)}}function $(t,e){if(1&t&&(l.Ub(0,"div",33),l.Kc(1),l.Tb()),2&t){var n=l.fc();l.Bb(1),l.Lc(n.errors.description)}}function H(t,e){1&t&&(l.Ub(0,"span",26),l.Kc(1,"Update"),l.Tb())}function J(t,e){1&t&&(l.Ub(0,"span",26),l.Kc(1,"Create"),l.Tb())}var X,W=((X=function(){function t(e,n,a,i,o,r){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.api=a,this.imageValidator=i,this.uploadQueue=o,this.toast=r,this.categories=[],this.model={},this.updating=!1,this.errors={},this.hydrate()}return _createClass(t,[{key:"close",value:function(t){this.dialogRef.close(t)}},{key:"confirm",value:function(){var t=this;this.api.createOrUpdateCategory(this.getPayload()).subscribe((function(e){t.toast.open(t.model.id?"Updated category.":"Created category."),t.close(e)}),(function(e){return t.errors=e.errors}))}},{key:"hydrate",value:function(){this.fetchCategories(this.data.category),this.data.category&&(this.updating=!0,this.model=this.data.category),this.data.parentId&&(this.model.parent_id=this.data.parentId)}},{key:"getPayload",value:function(){return{id:this.model.id,name:this.model.name,image:this.model.image,description:this.model.description,parent_id:this.model.parent_id||null,hidden:this.model.hidden}}},{key:"fetchCategories",value:function(t){var e=this;this.api.getCategories().subscribe((function(n){e.categories=n.categories.filter((function(e){return!t||t.id!==e.id}))}))}},{key:"openInsertImageDialog",value:function(){var t=this,e={uri:"uploads/images",httpParams:{diskPrefix:"category"},validator:this.imageValidator};Object(D.a)({types:[K.a.image],multiple:!1}).then((function(n){n&&t.uploadQueue.start(n,e).subscribe((function(e){t.model.image=e.fileEntry.url}))}))}}]),t}()).\u0275fac=function(t){return new(t||X)(l.Ob(c.h),l.Ob(c.a),l.Ob(k.a),l.Ob(F.a),l.Ob(S.a),l.Ob(V.b))},X.\u0275cmp=l.Ib({type:X,selectors:[["category-modal"]],features:[l.Ab([S.a])],decls:46,vars:18,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","name","name",3,"ngModel","ngModelChange"],["class","error name-error",4,"ngIf"],["for","image","trans",""],[1,"input-with-action","action-left"],["mat-flat-button","","color","accent","type","button",1,"addon",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","id","image","name","image",3,"ngModel","ngModelChange"],["class","error image-error",4,"ngIf"],["type","text","id","parent_id","name","parent_id",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","error parent-error",4,"ngIf"],["for","description","trans",""],["type","text","id","description","name","description","rows","4",3,"ngModel","ngModelChange"],["class","error description-error",4,"ngIf"],[1,"setting-toggle-container"],["name","hidden","id","hidden","trans","",3,"ngModel","ngModelChange"],["trans",""],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],[1,"error","name-error"],[1,"error","image-error"],[3,"value"],[1,"error","parent-error"],[1,"error","description-error"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Ic(2,R,2,0,"span",2),l.Ic(3,z,2,0,"span",2),l.Tb(),l.Ub(4,"button",3),l.bc("click",(function(){return e.close()})),l.Pb(5,"mat-icon",4),l.Tb(),l.Tb(),l.Ub(6,"form",5),l.bc("ngSubmit",(function(){return e.confirm()})),l.Ub(7,"mat-dialog-content",6),l.Ub(8,"div",7),l.Ub(9,"label",8),l.Kc(10,"Name"),l.Tb(),l.Ub(11,"input",9),l.bc("ngModelChange",(function(t){return e.model.name=t})),l.Tb(),l.Ic(12,G,2,1,"div",10),l.Tb(),l.Ub(13,"div",7),l.Ub(14,"label",11),l.Kc(15,"Image"),l.Tb(),l.Ub(16,"div",12),l.Ub(17,"button",13),l.bc("click",(function(){return e.openInsertImageDialog()})),l.gc(18,"trans"),l.Pb(19,"mat-icon",14),l.Tb(),l.Ub(20,"input",15),l.bc("ngModelChange",(function(t){return e.model.image=t})),l.Tb(),l.Tb(),l.Ic(21,N,2,1,"div",16),l.Tb(),l.Ub(22,"div",7),l.Ub(23,"label",8),l.Kc(24,"Parent Category"),l.Tb(),l.Ub(25,"select",17),l.bc("ngModelChange",(function(t){return e.model.parent_id=t})),l.Ub(26,"option",18),l.Kc(27,"No Parent Category"),l.Tb(),l.Ic(28,E,2,2,"option",19),l.Tb(),l.Ic(29,Q,2,1,"div",20),l.Tb(),l.Ub(30,"div",7),l.Ub(31,"label",21),l.Kc(32,"Description"),l.Tb(),l.Ub(33,"textarea",22),l.bc("ngModelChange",(function(t){return e.model.description=t})),l.Tb(),l.Ic(34,$,2,1,"div",23),l.Tb(),l.Ub(35,"div",24),l.Ub(36,"mat-slide-toggle",25),l.bc("ngModelChange",(function(t){return e.model.hidden=t})),l.Kc(37,"Hidden"),l.Tb(),l.Ub(38,"p",26),l.Kc(39,"Whether this category should be displayed in help center."),l.Tb(),l.Tb(),l.Tb(),l.Ub(40,"mat-dialog-actions"),l.Ub(41,"button",27),l.bc("click",(function(){return e.close()})),l.Kc(42,"Cancel"),l.Tb(),l.Ub(43,"button",28),l.Ic(44,H,2,0,"span",2),l.Ic(45,J,2,0,"span",2),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(2),l.nc("ngIf",e.updating),l.Bb(1),l.nc("ngIf",!e.updating),l.Bb(8),l.nc("ngModel",e.model.name),l.Bb(1),l.nc("ngIf",e.errors.name),l.Bb(5),l.nc("matTooltip",l.hc(18,16,"Upload image")),l.Bb(3),l.nc("ngModel",e.model.image),l.Bb(1),l.nc("ngIf",e.errors.image),l.Bb(4),l.nc("ngModel",e.model.parent_id),l.Bb(1),l.nc("ngValue",null),l.Bb(2),l.nc("ngForOf",e.categories),l.Bb(1),l.nc("ngIf",e.errors.parent_id),l.Bb(4),l.nc("ngModel",e.model.description),l.Bb(1),l.nc("ngIf",e.errors.description),l.Bb(2),l.nc("ngModel",e.model.hidden),l.Bb(8),l.nc("ngIf",e.updating),l.Bb(1),l.nc("ngIf",!e.updating))},directives:[c.i,i.t,u.b,b.a,o.v,o.w,c.f,s.a,o.d,o.u,o.x,x.a,o.G,o.z,o.J,i.s,j.a,c.c],pipes:[_.a],encapsulation:2}),X),Y=n("KKQg"),Z=n("WAq7"),q=n("QGXG"),tt=n("KHvZ"),et=n("rG4v"),nt=n("3FDK"),at=n("FBzJ"),it=n("83jf");function ot(t,e){1&t&&(l.Ub(0,"span",31),l.Kc(1,"Create Article"),l.Tb())}function rt(t,e){1&t&&(l.Ub(0,"span",32),l.Kc(1,"Update Article"),l.Tb())}function ct(t,e){if(1&t){var n=l.Vb();l.Ub(0,"reply-attachment-list",34),l.bc("detached",(function(t){return l.zc(n),l.fc(2).removeAttachment(t)})),l.Tb()}if(2&t){var a=l.fc(2);l.nc("attachments",a.attachments)}}function lt(t,e){if(1&t&&(l.Ub(0,"div",23),l.Ub(1,"div",24),l.Kc(2,"Attachments"),l.Tb(),l.Ub(3,"div",25),l.Ic(4,ct,1,1,"reply-attachment-list",33),l.Tb(),l.Tb()),2&t){var n=l.fc();l.Bb(4),l.nc("ngIf",n.attachments.length)}}var st,ut,bt,dt,gt,pt=function(){return{exact:!0}},ht=((st=function(){function t(e,n,a,i,o,r,c){_classCallCheck(this,t),this.modal=e,this.helpCenter=n,this.toast=a,this.route=i,this.router=o,this.uploadQueue=r,this.fb=c,this.updating=!1,this.attachments=[],this.form=this.fb.group({title:[""],body:[""],slug:[""],description:[""],position:[0],draft:[1],categories:[[]],tags:[[]]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe((function(e){if(e.article){var n=e.article;n.categories=n.categories.map((function(t){return t.id})),n.tags=n.tags.map((function(t){return t.name})),t.form.patchValue(n),t.textEditor.setContents(n.body),t.attachments=n.uploads||[]}}))}},{key:"saveOrUpdateArticle",value:function(){var t=this;this.updating=!0,(this.route.snapshot.data.article?this.helpCenter.updateArticle(this.route.snapshot.data.article.id,this.getPayload()):this.helpCenter.createArticle(this.getPayload())).subscribe((function(){t.toast.open("Article "+(t.route.snapshot.data.article?"updated.":"created.")),t.router.navigateByUrl("help-center/manage/articles")}),(function(e){var n=e.errors[Object.keys(e.errors)[0]];t.toast.open(n),t.updating=!1}))}},{key:"openPreviewModal",value:function(){this.modal.open(L,{article:this.getPayload(!1)},{panelClass:"article-modal-container"})}},{key:"openArticleSettingsModal",value:function(){this.modal.show(d,{form:this.form})}},{key:"getPayload",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.form.value;return e.body=this.textEditor.getContents(),t&&(e.uploads=this.attachments.map((function(t){return t.id}))),e.slug=Object(Z.a)(e.slug),e}},{key:"openNewCategoryModal",value:function(){var t=this;this.modal.show(W).afterClosed().subscribe((function(e){e&&t.categoriesManager.refresh().subscribe((function(){t.categoriesManager.toggle(e)}))}))}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe((function(t){e.attachments=[].concat(_toConsumableArray(e.attachments),[t.fileEntry])}))}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),t}()).\u0275fac=function(t){return new(t||st)(l.Ob(q.a),l.Ob(tt.a),l.Ob(V.b),l.Ob(r.a),l.Ob(r.f),l.Ob(S.a),l.Ob(o.h))},st.\u0275cmp=l.Ib({type:st,selectors:[["new-article"]],viewQuery:function(t,e){var n;1&t&&(l.Gc(Y.a,!0),l.Gc(M,!0)),2&t&&(l.vc(n=l.cc())&&(e.textEditor=n.first),l.vc(n=l.cc())&&(e.categoriesManager=n.first))},features:[l.Ab([S.a])],decls:42,vars:18,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink"],[1,"actions"],[1,"no-style","action","article-settings-action",3,"click"],["svgIcon","settings"],["id","submit",1,"no-style","publish-article-button","new-item-button",3,"click"],["class","create-article-submit","trans","",4,"ngIf"],["class","update-article-submit","trans","",4,"ngIf"],[1,"container",3,"formGroup"],[1,"middle-column"],[1,"input-container","title"],["type","text","formControlName","title","placeholder","Title","trans-placeholder","",1,"article-title-input"],["formControlName","draft",1,"article-status-input"],["trans","",3,"value"],[1,"text-editor-container"],["inlineUploadPrefix","article_images","minHeight","auto",1,"text-editor",3,"showAdvancedControls","onFileUpload"],["editorEl",""],["customScrollbar","lite",1,"right-column"],["formControlName","categories",1,"categories-panel"],[1,"new-category-button"],["mat-flat-button","","color","accent","trans","",3,"click"],[1,"panel"],["trans","",1,"panel-header"],[1,"panel-body"],["formControlName","tags"],["class","panel",4,"ngIf"],[1,"preview-article-button",3,"matTooltip","click"],["svgIcon","remove-red-eye",1,"size-20"],[1,"overlay",3,"isVisible"],["trans","",1,"create-article-submit"],["trans","",1,"update-article-submit"],[3,"attachments","detached",4,"ngIf"],[3,"attachments","detached"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"a",2),l.Kc(3,"Home"),l.Tb(),l.Ub(4,"a",3),l.Kc(5,"Categories"),l.Tb(),l.Ub(6,"a",2),l.Kc(7,"Articles"),l.Tb(),l.Tb(),l.Ub(8,"div",4),l.Ub(9,"button",5),l.bc("click",(function(){return e.openArticleSettingsModal()})),l.Pb(10,"mat-icon",6),l.Tb(),l.Ub(11,"button",7),l.bc("click",(function(){return e.saveOrUpdateArticle()})),l.Ic(12,ot,2,0,"span",8),l.Ic(13,rt,2,0,"span",9),l.Tb(),l.Tb(),l.Tb(),l.Ub(14,"div",10),l.Ub(15,"section",11),l.Ub(16,"div",12),l.Pb(17,"input",13),l.Ub(18,"select",14),l.Ub(19,"option",15),l.Kc(20,"Published"),l.Tb(),l.Ub(21,"option",15),l.Kc(22,"Draft"),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"div",16),l.Pb(24,"upload-progress-bar"),l.Ub(25,"text-editor",17,18),l.bc("onFileUpload",(function(t){return e.uploadFiles(t)})),l.Tb(),l.Tb(),l.Tb(),l.Ub(27,"aside",19),l.Ub(28,"categories-manager",20),l.Ub(29,"div",21),l.Ub(30,"button",22),l.bc("click",(function(){return e.openNewCategoryModal()})),l.Kc(31,"+ Add New Category"),l.Tb(),l.Tb(),l.Tb(),l.Ub(32,"div",23),l.Ub(33,"div",24),l.Kc(34,"Tags"),l.Tb(),l.Ub(35,"div",25),l.Pb(36,"tags-manager",26),l.Tb(),l.Tb(),l.Ic(37,lt,5,1,"div",27),l.Tb(),l.Ub(38,"button",28),l.bc("click",(function(){return e.openPreviewModal()})),l.gc(39,"trans"),l.Pb(40,"mat-icon",29),l.Tb(),l.Pb(41,"loading-indicator",30),l.Tb()),2&t&&(l.Bb(2),l.nc("routerLink","/help-center")("routerLinkActiveOptions",l.rc(16,pt)),l.Bb(2),l.nc("routerLink","/help-center/manage/categories"),l.Bb(2),l.nc("routerLink","/help-center/manage/articles")("routerLinkActiveOptions",l.rc(17,pt)),l.Bb(6),l.nc("ngIf",!e.route.snapshot.data.article),l.Bb(1),l.nc("ngIf",e.route.snapshot.data.article),l.Bb(1),l.nc("formGroup",e.form),l.Bb(5),l.nc("value",0),l.Bb(2),l.nc("value",1),l.Bb(4),l.nc("showAdvancedControls",!0),l.Bb(12),l.nc("ngIf",null==e.attachments?null:e.attachments.length),l.Bb(1),l.nc("matTooltip",l.hc(39,14,"Preview Article")),l.Bb(3),l.nc("isVisible",e.updating))},directives:[r.i,r.h,s.a,b.a,i.t,o.v,o.m,o.d,o.u,o.k,o.G,o.z,o.J,et.a,Y.a,h.a,M,u.b,nt.a,x.a,at.a,it.a],pipes:[_.a],styles:["new-article{display:block;overflow:hidden;background-color:var(--be-background-alternative)}new-article .action-bar .action{color:var(--be-secondary-text)}new-article .text-editor-container{height:calc(100% - 50px)}new-article .container{display:flex;max-width:1300px;margin:20px auto;height:calc(100vh - 165px)}new-article .container .middle-column{flex:1 1 auto;height:100%;margin-right:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);background-color:var(--be-background);border:1px solid #d3d3d3;border-bottom-color:#c4c4c4;border-radius:4px;overflow:hidden}new-article .container .middle-column .title{display:flex}new-article .container .middle-column .title .article-status-input,new-article .container .middle-column .title .article-title-input{border:none;height:50px}new-article .container .middle-column .title .article-title-input{flex:1 1 auto;font-size:2rem;padding:10px 25px}new-article .container .middle-column .title .article-status-input{flex:0 0 130px;border-left:1px solid var(--be-divider-default)}new-article .container .middle-column text-editor{max-height:none;border-left:none;border-right:none;border-bottom:none}new-article .container .middle-column text-editor .editor-footer,new-article .container .middle-column text-editor .editor-header{background-color:#fff}new-article .container .right-column{width:302px;flex:0 0 302px;overflow:auto;padding:0 2px;height:100%}new-article .container .right-column .panel{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);background-color:var(--be-background);border:1px solid #d3d3d3;border-bottom-color:#c4c4c4;border-radius:4px}new-article .container .right-column .new-category-button{margin:15px 0 5px}new-article .container .preview-article-button{width:50px;height:50px;display:flex;justify-content:center;align-items:center;border-radius:50%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);background-color:var(--be-accent-default);color:var(--be-accent-contrast);position:absolute;right:20px;bottom:20px;border:none;outline:none;cursor:pointer}new-article reply-attachment-list{display:block}new-article reply-attachment-list .attachments-list-item{width:100%}"],encapsulation:2}),st),ft=n("EY2u"),mt=n("LRne"),vt=n("lJxs"),yt=n("JIr8"),kt=n("5+tZ"),Ct=((ut=function(){function t(e,n,a){_classCallCheck(this,t),this.helpCenter=e,this.categories=n,this.router=a}return _createClass(t,[{key:"resolve",value:function(t){var e=this;return this.helpCenter.getArticle(t.params.article_id).pipe(Object(vt.a)((function(t){return t.article}))).pipe(Object(yt.a)((function(){return e.router.navigateByUrl("/help-center/manage/articles"),ft.a})),Object(kt.a)((function(t){return Object(mt.a)(t)})))}}]),t}()).\u0275fac=function(t){return new(t||ut)(l.Yb(tt.a),l.Yb(k.a),l.Yb(r.f))},ut.\u0275prov=l.Kb({token:ut,factory:ut.\u0275fac,providedIn:"root"}),ut),xt=n("2hX1"),Tt=n("rpAg"),_t=n("kmQS"),wt=n("bmro"),Ut=n("8LU1"),Ot=n("0EQZ"),It=n("FKr1"),Pt=n("u47x"),Bt=["button"],Mt=["*"],At=new l.r("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Lt={provide:o.s,useExisting:Object(l.V)((function(){return St})),multi:!0},Dt=0,Kt=function t(e,n){_classCallCheck(this,t),this.source=e,this.value=n},St=((bt=function(){function t(e,n){_classCallCheck(this,t),this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-"+Dt++,this.valueChange=new l.n,this.change=new l.n,this.appearance=n&&n.appearance?n.appearance:"standard"}return _createClass(t,[{key:"ngOnInit",value:function(){this._selectionModel=new Ot.b(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var t;(t=this._selectionModel).select.apply(t,_toConsumableArray(this._buttonToggles.filter((function(t){return t.checked}))))}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_emitChangeEvent",value:function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,n=new Kt(e,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||t.checked||(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):i=!0,i?Promise.resolve().then((function(){return n._updateModelValue(a)})):this._updateModelValue(a)}},{key:"_isSelected",value:function(t){return this._selectionModel&&this._selectionModel.isSelected(t)}},{key:"_isPrechecked",value:function(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some((function(e){return null!=t.value&&e===t.value})):t.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(t){var e=this;if(this._rawValue=t,this._buttonToggles)if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),t.forEach((function(t){return e._selectValue(t)}))}else this._clearSelection(),this._selectValue(t)}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach((function(t){return t.checked=!1}))}},{key:"_selectValue",value:function(t){var e=this._buttonToggles.find((function(e){return null!=e.value&&e.value===t}));e&&(e.checked=!0,this._selectionModel.select(e))}},{key:"_updateModelValue",value:function(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}},{key:"name",get:function(){return this._name},set:function(t){var e=this;this._name=t,this._buttonToggles&&this._buttonToggles.forEach((function(t){t.name=e._name,t._markForCheck()}))}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=Object(Ut.c)(t)}},{key:"value",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map((function(t){return t.value})):t[0]?t[0].value:void 0},set:function(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(Ut.c)(t)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(Ut.c)(t),this._buttonToggles&&this._buttonToggles.forEach((function(t){return t._markForCheck()}))}}]),t}()).\u0275fac=function(t){return new(t||bt)(l.Ob(l.h),l.Ob(At,8))},bt.\u0275dir=l.Jb({type:bt,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,e,n){var a;1&t&&l.Hb(n,Vt,!0),2&t&&l.vc(a=l.cc())&&(e._buttonToggles=a)},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,e){2&t&&(l.Cb("aria-disabled",e.disabled),l.Fb("mat-button-toggle-vertical",e.vertical)("mat-button-toggle-group-appearance-standard","standard"===e.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[l.Ab([Lt])]}),bt),Ft=Object(It.w)((function t(){_classCallCheck(this,t)})),Vt=((gt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,a,i,o,r,c){var s;_classCallCheck(this,n),(s=e.call(this))._changeDetectorRef=a,s._elementRef=i,s._focusMonitor=o,s._isSingleSelector=!1,s._checked=!1,s.ariaLabelledby=null,s._disabled=!1,s.change=new l.n;var u=Number(r);return s.tabIndex=u||0===u?u:null,s.buttonToggleGroup=t,s.appearance=c&&c.appearance?c.appearance:"standard",s}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-"+Dt++,this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(t){this._buttonElement.nativeElement.focus(t)}},{key:"_onButtonClick",value:function(){var t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Kt(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}},{key:"buttonId",get:function(){return this.id+"-button"}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(t){this._appearance=t}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(t){var e=Object(Ut.c)(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=Object(Ut.c)(t)}}]),n}(Ft)).\u0275fac=function(t){return new(t||gt)(l.Ob(St,8),l.Ob(l.h),l.Ob(l.l),l.Ob(Pt.h),l.Zb("tabindex"),l.Ob(At,8))},gt.\u0275cmp=l.Ib({type:gt,selectors:[["mat-button-toggle"]],viewQuery:function(t,e){var n;1&t&&l.Rc(Bt,!0),2&t&&l.vc(n=l.cc())&&(e._buttonElement=n.first)},hostAttrs:[1,"mat-button-toggle"],hostVars:11,hostBindings:function(t,e){1&t&&l.bc("focus",(function(){return e.focus()})),2&t&&(l.Cb("tabindex",-1)("id",e.id)("name",null),l.Fb("mat-button-toggle-standalone",!e.buttonToggleGroup)("mat-button-toggle-checked",e.checked)("mat-button-toggle-disabled",e.disabled)("mat-button-toggle-appearance-standard","standard"===e.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.yb],ngContentSelectors:Mt,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,e){if(1&t&&(l.mc(),l.Ub(0,"button",0,1),l.bc("click",(function(){return e._onButtonClick()})),l.Ub(2,"div",2),l.lc(3),l.Tb(),l.Tb(),l.Pb(4,"div",3),l.Pb(5,"div",4)),2&t){var n=l.wc(1);l.nc("id",e.buttonId)("disabled",e.disabled||null),l.Cb("tabindex",e.disabled?-1:e.tabIndex)("aria-pressed",e.checked)("name",e.name||null)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),l.Bb(5),l.nc("matRippleTrigger",n)("matRippleDisabled",e.disableRipple||e.disabled)}},directives:[It.q],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),gt),jt=((dt=function t(){_classCallCheck(this,t)}).\u0275mod=l.Mb({type:dt}),dt.\u0275inj=l.Lb({factory:function(t){return new(t||dt)},imports:[[It.g,It.r],It.g]}),dt),Rt=n("rcZy"),zt=n("A5z7"),Gt=n("CH4Q");function Nt(t,e){if(1&t&&(l.Ub(0,"option",31),l.Kc(1),l.gc(2,"trans"),l.Tb()),2&t){var n=e.$implicit;l.nc("value",n.value),l.Bb(1),l.Lc(l.hc(2,2,n.key))}}function Et(t,e){if(1&t&&(l.Ub(0,"span",49),l.Kc(1),l.Tb()),2&t){var n=l.fc(2).$implicit;l.Bb(1),l.Mc("",n.categories[0].parent.name," > ")}}function Qt(t,e){if(1&t&&(l.Ub(0,"div",46),l.Ic(1,Et,2,1,"span",47),l.Ub(2,"span",48),l.Kc(3),l.Tb(),l.Tb()),2&t){var n=l.fc().$implicit;l.Bb(1),l.nc("ngIf",null==n.categories[0]?null:n.categories[0].parent),l.Bb(2),l.Lc(n.categories[0].name)}}function $t(t,e){if(1&t){var n=l.Vb();l.Ub(0,"mat-chip",50),l.bc("click",(function(t){l.zc(n);var a=e.$implicit;return l.fc(3).toggleTagFilter(a),t.stopPropagation()})),l.Kc(1),l.Tb()}if(2&t){var a=e.$implicit;l.Bb(1),l.Lc(a.display_name)}}function Ht(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",38),l.bc("click",(function(){l.zc(n);var t=e.$implicit;return l.fc(2).goToUpdateArticle(t.id)})),l.Ub(1,"button",39),l.bc("click",(function(t){l.zc(n);var a=e.$implicit;return l.fc(2).maybeDeleteArticle(a),t.stopPropagation()})),l.gc(2,"trans"),l.Pb(3,"mat-icon",40),l.Tb(),l.Ic(4,Qt,4,2,"div",41),l.Ub(5,"div",42),l.Kc(6),l.Tb(),l.Ub(7,"div",43),l.Kc(8),l.Tb(),l.Ub(9,"mat-chip-list",44),l.Ic(10,$t,2,1,"mat-chip",45),l.Tb(),l.Tb()}if(2&t){var a=e.$implicit;l.Fb("draft",a.draft),l.Bb(1),l.nc("matTooltip",l.hc(2,7,"Delete Article")),l.Bb(3),l.nc("ngIf",a.categories.length),l.Bb(2),l.Lc(a.title),l.Bb(2),l.Lc(a.body),l.Bb(2),l.nc("ngForOf",a.tags)}}function Jt(t,e){1&t&&(l.Ub(0,"no-results-message"),l.Ub(1,"span",51),l.Kc(2,"Could not find any articles."),l.Tb(),l.Ub(3,"span",52),l.Kc(4,"Try to make article files less specific."),l.Tb(),l.Tb())}function Xt(t,e){if(1&t&&(l.Ub(0,"div",32,33),l.Ub(2,"div",34),l.Ub(3,"div"),l.Ic(4,Ht,11,9,"div",35),l.Tb(),l.Ic(5,Jt,5,0,"no-results-message",36),l.gc(6,"async"),l.Tb(),l.Pb(7,"loading-indicator",37),l.gc(8,"async"),l.Pb(9,"datatable-footer"),l.Tb()),2&t){var n=e.ngIf,a=l.fc();l.Bb(3),l.Fb("grid-flex-wrapper","grid"===a.selectedLayout),l.Bb(1),l.nc("ngForOf",n),l.Bb(1),l.nc("ngIf",l.hc(6,5,a.datatable.paginator.noResults$)),l.Bb(2),l.nc("isVisible",l.hc(8,7,a.datatable.paginator.loading$))}}var Wt,Yt,Zt=function(){return{exact:!0}},qt=((Wt=function(){function t(e,n,a,i){_classCallCheck(this,t),this.helpCenter=e,this.router=n,this.datatable=a,this.settings=i,this.selectedLayout="grid",this.articleOrderOptions=Tt.a,this.form=new o.l({categories:new o.i(""),tags:new o.i([]),draft:new o.i(null),order:new o.i(this.settings.get("articles.default_order"))})}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.datatable.init({uri:"help-center/articles"}),this.form.valueChanges.subscribe((function(e){t.datatable.filters$.next(e)}))}},{key:"goToUpdateArticle",value:function(t){this.router.navigate(["/help-center/manage/","articles",t,"edit"])}},{key:"maybeDeleteArticle",value:function(t){var e=this;this.datatable.confirmResourceDeletion("article").subscribe((function(){e.helpCenter.deleteArticles([t.id]).subscribe((function(){return e.datatable.reset()}))}))}},{key:"setLayout",value:function(t){this.selectedLayout=t}},{key:"isLayoutActive",value:function(t){return this.selectedLayout===t}},{key:"toggleTagFilter",value:function(t){var e=this.form.get("tags").value,n=e.indexOf(t.name);n>-1?e.splice(n,1):e.push(t.name),this.form.get("tags").setValue(e)}}]),t}()).\u0275fac=function(t){return new(t||Wt)(l.Ob(tt.a),l.Ob(r.f),l.Ob(xt.a),l.Ob(_t.a))},Wt.\u0275cmp=l.Ib({type:Wt,selectors:[["articles-list"]],features:[l.Ab([xt.a])],decls:46,vars:20,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item","home-nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item","categories-nav-item",3,"routerLink"],["routerLinkActive","router-link-active","trans","",1,"nav-item","articles-nav-item",3,"routerLink"],[1,"actions"],[1,"search-bar","input-container"],["placeholder","Search"],[1,"action-bar-action","change-layout-action"],[1,"no-style","grid-layout-button",3,"click"],["svgIcon","view-comfy"],[1,"no-style","list-layout-button",3,"click"],["svgIcon","view-list"],[1,"action-bar-action",3,"formGroup"],["name","order","id","order","formControlName","order"],[3,"value",4,"ngFor","ngForOf"],["routerLink","new",1,"new-article-button","new-item-button"],["svgIcon","add"],["trans",""],[1,"content"],[1,"article-list-filters"],[1,"filters-list",3,"formGroup"],["formControlName","categories",1,"article-categories-filter"],[1,"panel","tags-filter"],["trans","",1,"panel-header"],[1,"panel-body"],["formControlName","tags"],[1,"panel","article-type-filter"],["formControlName","draft"],["trans","",3,"value"],["class","articles-list-container",4,"ngIf"],[3,"value"],[1,"articles-list-container"],["scrollContainer",""],[1,"articles-list"],["class","articles-list-item",3,"draft","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"articles-list-item",3,"click"],[1,"no-style","delete-article-button",3,"matTooltip","click"],["svgIcon","delete",1,"size-20"],["class","article-categories",4,"ngIf"],[1,"article-title"],[1,"article-body"],[1,"article-tags"],["color","standard",3,"click",4,"ngFor","ngForOf"],[1,"article-categories"],["class","parent-category",4,"ngIf"],[1,"category"],[1,"parent-category"],["color","standard",3,"click"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"a",2),l.Kc(3,"Home"),l.Tb(),l.Ub(4,"a",3),l.Kc(5,"Categories"),l.Tb(),l.Ub(6,"a",4),l.Kc(7,"Articles"),l.Tb(),l.Tb(),l.Ub(8,"div",5),l.Ub(9,"div",6),l.Pb(10,"datatable-header-search-input",7),l.Tb(),l.Ub(11,"div",8),l.Ub(12,"button",9),l.bc("click",(function(){return e.setLayout("grid")})),l.Pb(13,"mat-icon",10),l.Tb(),l.Ub(14,"button",11),l.bc("click",(function(){return e.setLayout("list")})),l.Pb(15,"mat-icon",12),l.Tb(),l.Tb(),l.Ub(16,"div",13),l.Ub(17,"select",14),l.Ic(18,Nt,3,4,"option",15),l.gc(19,"keyvalue"),l.Tb(),l.Tb(),l.Ub(20,"a",16),l.Pb(21,"mat-icon",17),l.Ub(22,"span",18),l.Kc(23,"Create New Article"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(24,"div",19),l.Ub(25,"div",20),l.Ub(26,"div",21),l.Pb(27,"categories-manager",22),l.Ub(28,"div",23),l.Ub(29,"div",24),l.Kc(30,"Tags"),l.Tb(),l.Ub(31,"div",25),l.Pb(32,"tags-manager",26),l.Tb(),l.Tb(),l.Ub(33,"div",27),l.Ub(34,"div",24),l.Kc(35,"Article Status"),l.Tb(),l.Ub(36,"div",25),l.Ub(37,"mat-button-toggle-group",28),l.Ub(38,"mat-button-toggle",29),l.Kc(39,"All"),l.Tb(),l.Ub(40,"mat-button-toggle",29),l.Kc(41,"Published"),l.Tb(),l.Ub(42,"mat-button-toggle",29),l.Kc(43,"Draft"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ic(44,Xt,10,9,"div",30),l.gc(45,"async"),l.Tb()),2&t&&(l.Bb(2),l.nc("routerLink","/help-center")("routerLinkActiveOptions",l.rc(19,Zt)),l.Bb(2),l.nc("routerLink","/help-center/manage/categories"),l.Bb(2),l.nc("routerLink","/help-center/manage/articles"),l.Bb(6),l.Fb("active",e.isLayoutActive("grid")),l.Bb(2),l.Fb("active",e.isLayoutActive("list")),l.Bb(2),l.nc("formGroup",e.form),l.Bb(2),l.nc("ngForOf",l.hc(19,15,e.articleOrderOptions)),l.Bb(8),l.nc("formGroup",e.form),l.Bb(12),l.nc("value",null),l.Bb(2),l.nc("value",0),l.Bb(2),l.nc("value",1),l.Bb(2),l.nc("ngIf",l.hc(45,17,e.datatable.data$)))},directives:[r.i,r.h,s.a,wt.a,b.a,o.v,o.m,o.G,o.u,o.k,i.s,M,nt.a,St,Vt,i.t,o.z,o.J,at.a,Rt.a,x.a,zt.d,zt.a,Gt.a],pipes:[i.l,i.b,_.a],styles:["[_nghost-%COMP%]{display:block;max-height:calc(100vh - 70px);overflow:hidden;background-color:var(--be-background-alternative)}.content[_ngcontent-%COMP%]{display:flex}.article-list-filters[_ngcontent-%COMP%]{display:block;height:calc(100vh - 125px);overflow:auto;flex:0 0 302px;min-width:0;background-color:var(--be-background);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);position:relative;z-index:1}.article-list-filters[_ngcontent-%COMP%]     .mat-button-toggle{flex:1 1 auto}.article-list-filters[_ngcontent-%COMP%]   .filters-list[_ngcontent-%COMP%]{padding:15px}.article-list-filters[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}no-results-message[_ngcontent-%COMP%]{margin-top:50px}.articles-list-container[_ngcontent-%COMP%]{flex:1 1 auto;height:calc(100vh - 120px);overflow:auto}datatable-footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);overflow:hidden;background-color:var(--be-background)}.articles-list[_ngcontent-%COMP%]{padding:10px;min-height:calc(100% - 57px)}.articles-list-item[_ngcontent-%COMP%]{background-color:var(--be-background);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:15px;border-radius:4px;color:var(--be-secondary-text);cursor:pointer;margin-bottom:10px;transition:background-color .2s ease-in-out;position:relative}.articles-list-item[_ngcontent-%COMP%]:hover{background-color:var(--be-accent-emphasis)}.delete-article-button[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.article-categories[_ngcontent-%COMP%]{font-size:1.3rem;font-style:italic;margin-bottom:15px}.article-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.9rem}.article-body[_ngcontent-%COMP%]{font-size:1.4rem;word-wrap:break-word}.article-tags[_ngcontent-%COMP%]{margin-top:15px}.grid-flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:calc(25% - 10px);margin:5px}@media screen and (max-width:1280px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}}@media screen and (max-width:1024px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:calc(50% - 10px)}}@media screen and (max-width:768px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:100%}}.grid-flex-wrapper[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{margin-bottom:10px;font-size:2rem}.grid-flex-wrapper[_ngcontent-%COMP%]   .article-body[_ngcontent-%COMP%]{font-size:1.6rem;flex:1 1 auto}.action-bar-action[_ngcontent-%COMP%]{display:flex;border-right:1px solid var(--be-divider-default);padding:0 20px;height:100%;width:auto}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:26px;height:26px}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-right:5px}.action-bar-action[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.action-bar-action[_ngcontent-%COMP%]     select{height:100%;border:none;outline:none}"]}),Wt),te=n("twBr"),ee=n("N2vX"),ne=((Yt=function t(e,n){_classCallCheck(this,t),this.settings=e,this.currentUser=n}).\u0275fac=function(t){return new(t||Yt)(l.Ob(_t.a),l.Ob(te.a))},Yt.\u0275cmp=l.Ib({type:Yt,selectors:[["help-center-manage"]],decls:3,vars:0,consts:[["menuPosition","agent-mailbox"],[1,"body"]],template:function(t,e){1&t&&(l.Pb(0,"material-navbar",0),l.Ub(1,"div",1),l.Pb(2,"router-outlet"),l.Tb())},directives:[ee.a,r.k],styles:["help-center-manage .navbar{box-shadow:none}help-center-manage .navbar .logo{margin-right:50px}help-center-manage .body{height:calc(100vh - 70px)}help-center-manage .action-bar{background-color:var(--be-background);height:55px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);display:flex;justify-content:center;position:relative;z-index:2}help-center-manage .action-bar .nav{flex:1 1 auto;display:flex;align-items:center}help-center-manage .action-bar .nav .nav-item{display:inline-block;color:var(--be-secondary-text);font-size:1.6rem;margin-left:25px;border-bottom:2px solid transparent;height:100%;line-height:55px}help-center-manage .action-bar .nav .nav-item.router-link-active{border-color:var(--be-accent-default)}help-center-manage .action-bar .actions{flex:1 1 auto;display:flex;justify-content:flex-end;align-items:center;margin-right:30px}help-center-manage .action-bar .actions .input-container{flex:0 0 300px;height:100%;position:relative}help-center-manage .action-bar .actions .input-container .mat-icon{position:absolute;top:16px;left:10px;color:var(--be-secondary-text)}help-center-manage .action-bar .actions .input-container input{font-size:1.7rem;padding-left:40px;border-top:none;border-bottom:none;height:100%;border-radius:0}help-center-manage .action-bar .actions .action{width:auto}help-center-manage .action-bar .actions .new-item-button{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-radius:50px;padding:1px 20px;border:none;line-height:30px;vertical-align:middle;white-space:nowrap;margin-left:30px}help-center-manage .action-bar .actions .new-item-button .mat-icon{transition:transform .2s ease-in-out;vertical-align:middle}help-center-manage .action-bar .actions .new-item-button:hover mat-icon{transform:rotate(180deg)}help-center-manage .panel{margin-bottom:15px;background-color:var(--be-background);border:1px solid var(--be-divider-default);border-radius:3px}help-center-manage .panel .panel-header{display:flex;align-items:center;padding:0 10px;background-color:var(--be-background-alternative);border-bottom:1px solid var(--be-divider-default);min-height:41px}help-center-manage .panel .panel-header button{margin-left:auto}help-center-manage .panel .panel-body{overflow:auto;padding:10px}help-center-manage .panel .panel-body .filter-button{min-width:75px;padding:0 5px}help-center-manage .panel .panel-body .filter-button:not(:last-of-type){margin-right:4px}help-center-manage .panel .panel-body .filter-button.active{background-color:var(--be-accent-default);color:var(--be-accent-contrast)}"],encapsulation:2}),Yt),ae=n("5+WD"),ie=n("/RwR");function oe(t,e){1&t&&l.Pb(0,"mat-icon",16)}function re(t,e){1&t&&(l.Ub(0,"span",17),l.Kc(1,"No Articles"),l.Tb())}function ce(t,e){if(1&t&&(l.Ub(0,"span",21),l.Kc(1),l.Ub(2,"span",22),l.Kc(3,"Articles"),l.Tb(),l.Tb()),2&t){var n=l.fc(2);l.Bb(1),l.Mc("",n.category.articles_count," ")}}function le(t,e){1&t&&(l.Ub(0,"span",23),l.Kc(1,"1 Article"),l.Tb())}function se(t,e){if(1&t&&(l.Ub(0,"span",18),l.Ic(1,ce,4,1,"span",19),l.Ic(2,le,2,0,"span",20),l.Tb()),2&t){var n=l.fc();l.Bb(1),l.nc("ngIf",n.category.articles_count>1),l.Bb(1),l.nc("ngIf",1==n.category.articles_count)}}function ue(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",24),l.bc("click",(function(){return l.zc(n),l.fc().openCreateChildCategoryModal()})),l.gc(1,"trans"),l.Pb(2,"mat-icon",25),l.Tb()}2&t&&l.nc("matTooltip",l.hc(1,1,"Create Child Category"))}function be(t,e){if(1&t){var n=l.Vb();l.Ub(0,"button",26),l.bc("click",(function(){l.zc(n);var t=l.fc();return t.maybeDetachCategory(t.category.id)})),l.gc(1,"trans"),l.Pb(2,"mat-icon",27),l.Tb()}2&t&&l.nc("matTooltip",l.hc(1,1,"Detach Category"))}var de,ge=((de=function(){function t(e,n,a,i){_classCallCheck(this,t),this.modal=e,this.api=n,this.router=a,this.storage=i,this.onChange=new l.n}return _createClass(t,[{key:"openCreateChildCategoryModal",value:function(){var t=this;this.modal.show(W,{parentId:this.category.id}).afterClosed().subscribe((function(){return t.onChange.emit()}))}},{key:"openUpdateCategoryModal",value:function(t){var e=this;this.modal.show(W,{category:t}).afterClosed().subscribe((function(){return e.onChange.emit()}))}},{key:"maybeDeleteCategory",value:function(t){var e=this;this.modal.show(ie.a,{title:"Delete Category",body:"Are you sure you want to delete this category?",bodyBold:"Children of this category will not be deleted.",ok:"Delete"}).afterClosed().subscribe((function(n){n&&e.api.deleteCategory(t).subscribe((function(){return e.onChange.emit()}))}))}},{key:"maybeDetachCategory",value:function(t){var e=this;this.modal.show(ie.a,{title:"Detach Category",body:"Are you sure you want to detach this category from its parent?",ok:"Detach"}).afterClosed().subscribe((function(n){n&&e.api.detachCategory(t).subscribe((function(){return e.onChange.emit()}))}))}},{key:"navigateToArticlesList",value:function(t){var e=[t.id];t.parent_id&&e.push(t.parent_id),this.storage.set("selectedCategories",e),this.router.navigate(["/help-center/manage/articles"])}}]),t}()).\u0275fac=function(t){return new(t||de)(l.Ob(q.a),l.Ob(k.a),l.Ob(r.f),l.Ob(C.a))},de.\u0275cmp=l.Ib({type:de,selectors:[["category-list-item"]],inputs:{category:"category"},outputs:{onChange:"onChange"},decls:19,vars:12,consts:[[1,"category-name-container"],["cdkDragHandle","",1,"no-style","drag-handle"],["svgIcon","drag-handle"],[1,"category-name",3,"click"],["svgIcon","visibility-off","class","hidden-icon","color","warn",4,"ngIf"],[1,"info"],[1,"articles-count"],["class","no-articles","trans","",4,"ngIf"],["class","has-articles",4,"ngIf"],[1,"actions"],["mat-icon-button","",1,"update-category-button",3,"matTooltip","click"],["svgIcon","settings",1,"size-20"],["mat-icon-button","","class","new-child-category-button",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","class","detach-category-button",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"delete-category-button",3,"matTooltip","click"],["svgIcon","delete-forever",1,"size-20"],["svgIcon","visibility-off","color","warn",1,"hidden-icon"],["trans","",1,"no-articles"],[1,"has-articles"],["class","plural",4,"ngIf"],["class","singular","trans","",4,"ngIf"],[1,"plural"],["trans",""],["trans","",1,"singular"],["mat-icon-button","",1,"new-child-category-button",3,"matTooltip","click"],["svgIcon","create-new-folder",1,"size-20"],["mat-icon-button","",1,"detach-category-button",3,"matTooltip","click"],["svgIcon","delete",1,"size-20"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"button",1),l.Pb(2,"mat-icon",2),l.Tb(),l.Ub(3,"span",3),l.bc("click",(function(){return e.navigateToArticlesList(e.category)})),l.Kc(4),l.Tb(),l.Ic(5,oe,1,0,"mat-icon",4),l.Tb(),l.Ub(6,"div",5),l.Ub(7,"div",6),l.Ic(8,re,2,0,"span",7),l.Ic(9,se,3,2,"span",8),l.Tb(),l.Tb(),l.Ub(10,"div",9),l.Ub(11,"button",10),l.bc("click",(function(){return e.openUpdateCategoryModal(e.category)})),l.gc(12,"trans"),l.Pb(13,"mat-icon",11),l.Tb(),l.Ic(14,ue,3,3,"button",12),l.Ic(15,be,3,3,"button",13),l.Ub(16,"button",14),l.bc("click",(function(){return e.maybeDeleteCategory(e.category.id)})),l.gc(17,"trans"),l.Pb(18,"mat-icon",15),l.Tb(),l.Tb()),2&t&&(l.Bb(4),l.Lc(e.category.name),l.Bb(1),l.nc("ngIf",e.category.hidden),l.Bb(3),l.nc("ngIf",!e.category.articles_count),l.Bb(1),l.nc("ngIf",e.category.articles_count),l.Bb(2),l.nc("matTooltip",l.hc(12,8,"Update Category")),l.Bb(3),l.nc("ngIf",!e.category.parent_id),l.Bb(1),l.nc("ngIf",e.category.parent_id),l.Bb(1),l.nc("matTooltip",l.hc(17,10,"Delete Category")))},directives:[ae.b,b.a,i.t,u.b,x.a,s.a],pipes:[_.a],styles:["category-list-item{display:flex;vertical-align:middle;justify-content:center}category-list-item .category-name-container{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center}category-list-item .category-name-container .category-name,category-list-item .category-name-container .drag-handle{vertical-align:middle}category-list-item .category-name-container .category-name:hover{text-decoration:underline;cursor:pointer}category-list-item .drag-handle{color:var(--be-secondary-text);margin-right:8px;cursor:move}category-list-item .info{flex:0 0 150px;display:flex;align-items:center;color:var(--be-secondary-text)}category-list-item .actions{flex:0 0 150px;text-align:right}category-list-item .actions button{color:var(--be-secondary-text)}category-list-item .hidden-icon{margin-left:5px;vertical-align:middle}"],encapsulation:2,changeDetection:0}),de);function pe(t,e){if(1&t){var n=l.Vb();l.Ub(0,"category-list-item",22),l.bc("onChange",(function(){return l.zc(n),l.fc(3).updateCategories()})),l.Tb()}if(2&t){var a=e.$implicit;l.nc("cdkDragData",a)("category",a),l.Cb("data-id",a.id)}}function he(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",20),l.bc("cdkDropListDropped",(function(t){l.zc(n);var e=l.fc().$implicit;return l.fc().reorderCategories(t,e)})),l.Ic(1,pe,1,3,"category-list-item",21),l.Tb()}if(2&t){var a=l.fc().$implicit,i=l.fc();l.Fb("hidden",!i.categoryChildrenVisible),l.nc("cdkDropListDisabled",i.shouldDisableReorder()),l.Bb(1),l.nc("ngForOf",a.children)}}function fe(t,e){if(1&t){var n=l.Vb();l.Ub(0,"div",17),l.Ub(1,"category-list-item",18),l.bc("onChange",(function(){return l.zc(n),l.fc().updateCategories()})),l.Tb(),l.Ic(2,he,2,4,"div",19),l.Tb()}if(2&t){var a=e.$implicit;l.Bb(1),l.nc("cdkDragData",a)("category",a),l.Cb("data-id",a.id),l.Bb(1),l.nc("ngIf",a.children.length)}}var me,ve,ye=function(){return{exact:!0}},ke=((me=function(){function t(e,n){_classCallCheck(this,t),this.api=e,this.modal=n,this.searchQuery=new o.i,this.allCategories=[],this.filteredCategories=[],this.categoryChildrenVisible=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.updateCategories(),this.bindSearchQuery()}},{key:"showNewCategoryModal",value:function(){var t=this;this.modal.show(W).afterClosed().subscribe((function(e){e&&t.updateCategories()}))}},{key:"updateCategories",value:function(){var t=this;this.api.getCategories().subscribe((function(e){t.filteredCategories=e.categories,t.allCategories=e.categories,t.filterCategories(t.searchQuery.value)}))}},{key:"bindSearchQuery",value:function(){var t=this;this.searchQuery.valueChanges.pipe(Object(v.a)(400),Object(y.a)()).subscribe((function(e){return t.filterCategories(e)}))}},{key:"filterCategories",value:function(t){this.filteredCategories=(new p).filter(t,this.allCategories)}},{key:"reorderCategories",value:function(t,e){var n=e?e.children:this.filteredCategories;Object(ae.e)(n,t.previousIndex,t.currentIndex);var a=n.map((function(t){return t.id}));this.api.reorderCategories(a,e?e.id:null).subscribe()}},{key:"toggleCategoryChildren",value:function(){this.categoryChildrenVisible=!this.categoryChildrenVisible}},{key:"shouldDisableReorder",value:function(){return this.searchQuery.value}}]),t}()).\u0275fac=function(t){return new(t||me)(l.Ob(k.a),l.Ob(q.a))},me.\u0275cmp=l.Ib({type:me,selectors:[["categories-list"]],decls:23,vars:13,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink"],[1,"actions"],[1,"action"],["mat-icon-button","",1,"toggle-children-btn",3,"matTooltip","click"],["svgIcon","unfold-more"],[1,"search-bar","input-container"],["type","text","placeholder","Search","trans-placeholder","",1,"categories-search-input",3,"formControl"],["svgIcon","search"],[1,"new-category-button","new-item-button",3,"click"],["svgIcon","add"],["trans",""],[1,"container"],["cdkDropList","",1,"categories-list",3,"cdkDropListDisabled","cdkDropListDropped"],["class","category-container",4,"ngFor","ngForOf"],[1,"category-container"],["cdkDrag","",1,"category-list-item","parent-category",3,"cdkDragData","category","onChange"],["class","category-children","cdkDropList","",3,"hidden","cdkDropListDisabled","cdkDropListDropped",4,"ngIf"],["cdkDropList","",1,"category-children",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","class","category-list-item child-category",3,"cdkDragData","category","onChange",4,"ngFor","ngForOf"],["cdkDrag","",1,"category-list-item","child-category",3,"cdkDragData","category","onChange"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"a",2),l.Kc(3,"Home"),l.Tb(),l.Ub(4,"a",3),l.Kc(5,"Categories"),l.Tb(),l.Ub(6,"a",3),l.Kc(7,"Articles"),l.Tb(),l.Tb(),l.Ub(8,"div",4),l.Ub(9,"div",5),l.Ub(10,"button",6),l.bc("click",(function(){return e.toggleCategoryChildren()})),l.gc(11,"trans"),l.Pb(12,"mat-icon",7),l.Tb(),l.Tb(),l.Ub(13,"div",8),l.Pb(14,"input",9),l.Pb(15,"mat-icon",10),l.Tb(),l.Ub(16,"button",11),l.bc("click",(function(){return e.showNewCategoryModal()})),l.Pb(17,"mat-icon",12),l.Ub(18,"span",13),l.Kc(19,"New Category"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(20,"div",14),l.Ub(21,"section",15),l.bc("cdkDropListDropped",(function(t){return e.reorderCategories(t)})),l.Ic(22,fe,3,4,"div",16),l.Tb(),l.Tb()),2&t&&(l.Bb(2),l.nc("routerLink","/help-center")("routerLinkActiveOptions",l.rc(12,ye)),l.Bb(2),l.nc("routerLink","/help-center/manage/categories"),l.Bb(2),l.nc("routerLink","/help-center/manage/articles"),l.Bb(4),l.Fb("active",e.categoryChildrenVisible),l.nc("matTooltip",l.hc(11,10,"Toggle child categories")),l.Bb(4),l.nc("formControl",e.searchQuery),l.Bb(7),l.nc("cdkDropListDisabled",e.shouldDisableReorder()),l.Bb(1),l.nc("ngForOf",e.filteredCategories))},directives:[r.i,r.h,s.a,u.b,x.a,b.a,o.d,o.u,o.j,ae.c,i.s,ge,ae.a,i.t],pipes:[_.a],styles:["categories-list{display:block;background-color:var(--be-background-alternative)}categories-list .container{min-height:calc(100vh - 125px);margin:0 auto;padding-top:35px}categories-list category-list-item{background-color:var(--be-background);padding:15px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);font-size:1.6rem;margin-bottom:10px;transition:background-color .2s ease-in-out;border-radius:4px}categories-list category-list-item:hover{background-color:var(--be-accent-emphasis)}categories-list .category-children{margin-left:20px}categories-list .toggle-children-btn{color:var(--be-secondary-text);margin-right:10px}categories-list .toggle-children-btn.active{color:var(--be-accent-default)}categories-list .cdk-drop-list-disabled .drag-handle{color:rgba(0,0,0,.26);cursor:not-allowed}categories-list .cdk-drag-placeholder{opacity:0}categories-list .cdk-drag-animating,categories-list .cdk-drop-list-dragging .cdk-drag:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],encapsulation:2}),me),Ce=n("0QyJ"),xe=r.j.forChild([{path:"",component:ne,canActivate:[Ce.a],children:[{path:"",redirectTo:"articles"},{path:"articles",component:qt,data:{permissions:["categories.view","tags.view","articles.view","articles.create"]}},{path:"categories",component:ke,data:{permissions:["categories.view","categories.create"]}},{path:"articles/new",component:ht,data:{permissions:["articles.create"]}},{path:"articles/:article_id/edit",component:ht,resolve:{article:Ct},data:{permissions:["articles.update"]}}]}]),Te=n("xqw2"),_e=n("YHvm"),we=n("gFpt"),Ue=n("6rvT"),Oe=n("Iysn"),Ie=n("X3pI"),Pe=n("hD7E"),Be=n("JZOH"),Me=n("GSRO"),Ae=n("1ImS"),Le=n("09gM"),De=((ve=function t(){_classCallCheck(this,t)}).\u0275mod=l.Mb({type:ve}),ve.\u0275inj=l.Lb({factory:function(t){return new(t||ve)},imports:[[i.c,o.o,o.E,r.j,_e.a,Te.a,we.a,Ue.a,Oe.a,Ie.a,Pe.a,Be.a,Le.a,Me.a,xe,Ae.a,c.g,j.b,ae.d,u.c,b.b,x.b,T.b,jt,zt.g]]}),ve)}}]);