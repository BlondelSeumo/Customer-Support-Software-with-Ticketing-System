(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"703J":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t={}){this.type="custom";for(const e in t)this[e]=t[e]}}},"7T94":function(t,e,n){"use strict";n.d(e,"a",(function(){return B}));var i=n("cuTO"),o=n("0IaG"),r=n("h586"),s=n("LRne"),a=n("3E0/"),c=n("IzEk"),l=n("fXoL"),d=n("X3Ra"),b=n("ofXK"),u=n("bTqV"),h=n("NFeN"),p=n("3Pt+"),f=n("Rd8u"),m=n("KKQg"),g=n("rG4v"),v=n("83jf");const y=["textEditor"];function w(t,e){1&t&&(l.Ub(0,"span",20),l.Kc(1,"Update Canned Reply"),l.Tb())}function C(t,e){1&t&&(l.Ub(0,"span",20),l.Kc(1,"New Canned Reply"),l.Tb())}function O(t,e){if(1&t&&(l.Ub(0,"div",21),l.Kc(1),l.Tb()),2&t){const t=l.fc();l.Bb(1),l.Lc(t.errors.name)}}function U(t,e){if(1&t&&(l.Ub(0,"div",21),l.Kc(1),l.Tb()),2&t){const t=l.fc();l.Bb(1),l.Lc(t.errors.shared)}}function x(t,e){if(1&t&&(l.Ub(0,"div",21),l.Kc(1),l.Tb()),2&t){const t=l.fc();l.Bb(1),l.Lc(t.errors.body)}}function T(t,e){if(1&t&&(l.Ub(0,"div",21),l.Kc(1),l.Tb()),2&t){const t=l.fc();l.Bb(1),l.Lc(t.errors.uploads)}}function M(t,e){if(1&t){const t=l.Vb();l.Ub(0,"reply-attachment-list",22),l.bc("detached",(function(e){return l.zc(t),l.fc().removeAttachment(e)})),l.Tb()}if(2&t){const t=l.fc();l.nc("attachments",t.attachments)}}function P(t,e){1&t&&(l.Ub(0,"span",20),l.Kc(1,"Update"),l.Tb())}function I(t,e){1&t&&(l.Ub(0,"span",20),l.Kc(1,"Create"),l.Tb())}let B=(()=>{class t{constructor(t,e,n,o){this.dialogRef=t,this.data=e,this.cannedReplies=n,this.uploadQueue=o,this.attachments=[],this.model=new i.a,this.errors={},Object(s.a)(null).pipe(Object(a.a)(0),Object(c.a)(1)).subscribe(()=>this.hydrate())}close(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}confirm(){let t;const e=this.getPayload();t=this.model.id?this.cannedReplies.update(this.model.id,e):this.cannedReplies.create(e),t.subscribe(t=>{this.close(t.data)},t=>this.errors=t.errors)}getPayload(){return{name:this.model.name,body:this.textEditor.getContents(),shared:this.model.shared,uploads:this.attachments.map(t=>t.id)}}setContents(t={}){t.body&&this.textEditor.setContents(t.body),t.uploads&&(this.attachments=t.uploads.slice())}hydrate(){this.data.contents&&this.setContents(this.data.contents),this.data.cannedReply&&(this.model=new i.a(this.data.cannedReply),this.setContents({body:this.model.body,uploads:this.model.uploads}))}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments=[...this.attachments,t.fileEntry]})}removeAttachment(t){for(let e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(o.h),l.Ob(o.a),l.Ob(d.a),l.Ob(r.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["crupdate-canned-reply-modal"]],viewQuery:function(t,e){var n;1&t&&l.Gc(y,!0),2&t&&l.vc(n=l.cc())&&(e.textEditor=n.first)},features:[l.Ab([r.a])],decls:37,vars:14,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","canned-reply-name","trans",""],["type","text","id","canned-reply-name","name","canned-reply-name",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["for","shared","trans",""],["id","shared","name","shared",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],["for","canned-body","trans",""],["id","canned-body","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["textEditor",""],[3,"attachments","detached",4,"ngIf"],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],["trans",""],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Ic(2,w,2,0,"span",2),l.Ic(3,C,2,0,"span",2),l.Tb(),l.Ub(4,"button",3),l.bc("click",(function(){return e.close()})),l.Pb(5,"mat-icon",4),l.Tb(),l.Tb(),l.Ub(6,"form",5),l.bc("ngSubmit",(function(){return e.confirm()})),l.Ub(7,"mat-dialog-content",6),l.Ub(8,"div",7),l.Ub(9,"label",8),l.Kc(10,"Name"),l.Tb(),l.Ub(11,"input",9),l.bc("ngModelChange",(function(t){return e.model.name=t})),l.Tb(),l.Ic(12,O,2,1,"div",10),l.Tb(),l.Ub(13,"div",7),l.Ub(14,"label",11),l.Kc(15,"Shared"),l.Tb(),l.Ub(16,"select",12),l.bc("ngModelChange",(function(t){return e.model.shared=t})),l.Ub(17,"option",13),l.Kc(18,"Yes"),l.Tb(),l.Ub(19,"option",13),l.Kc(20,"No"),l.Tb(),l.Tb(),l.Ic(21,U,2,1,"div",10),l.Tb(),l.Ub(22,"div",7),l.Ub(23,"label",14),l.Kc(24,"Canned Reply Body"),l.Tb(),l.Ub(25,"text-editor",15,16),l.bc("onFileUpload",(function(t){return e.uploadFiles(t)})),l.Tb(),l.Pb(27,"upload-progress-bar"),l.Ic(28,x,2,1,"div",10),l.Ic(29,T,2,1,"div",10),l.Ic(30,M,1,1,"reply-attachment-list",17),l.Tb(),l.Tb(),l.Ub(31,"mat-dialog-actions"),l.Ub(32,"button",18),l.bc("click",(function(){return e.close()})),l.Kc(33,"Cancel"),l.Tb(),l.Ub(34,"button",19),l.Ic(35,P,2,0,"span",2),l.Ic(36,I,2,0,"span",2),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Bb(2),l.nc("ngIf",e.model.id),l.Bb(1),l.nc("ngIf",!e.model.id),l.Bb(8),l.nc("ngModel",e.model.name),l.Bb(1),l.nc("ngIf",e.errors.name),l.Bb(4),l.nc("ngModel",e.model.shared),l.Bb(1),l.nc("ngValue",!0),l.Bb(2),l.nc("ngValue",!1),l.Bb(2),l.nc("ngIf",e.errors.shared),l.Bb(4),l.nc("minHeight",300),l.Bb(3),l.nc("ngIf",e.errors.body),l.Bb(1),l.nc("ngIf",e.errors.uploads),l.Bb(1),l.nc("ngIf",e.attachments.length),l.Bb(5),l.nc("ngIf",e.model.id),l.Bb(1),l.nc("ngIf",!e.model.id))},directives:[o.i,b.t,u.b,h.a,p.v,p.w,o.f,f.a,p.d,p.u,p.x,p.G,p.z,p.J,m.a,g.a,o.c,v.a],styles:[".crupdate-canned-reply-modal-container{width:580px}.crupdate-canned-reply-modal-container reply-attachment-list{margin-top:25px}"],encapsulation:2}),t})()},"8RV8":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("0IaG"),o=n("3Pt+"),r=n("Kj3r"),s=n("/uUt"),a=n("eIep"),c=n("JIr8"),l=n("2Vo4"),d=n("LRne"),b=n("fXoL"),u=n("mWN8"),h=n("Rd8u"),p=n("NFeN"),f=n("FBzJ"),m=n("ofXK");function g(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",9),b.bc("click",(function(){b.zc(t);const n=e.$implicit;return b.fc().close(n)})),b.Pb(1,"img",10),b.Ub(2,"div",11),b.Ub(3,"div",12),b.Kc(4),b.Tb(),b.Ub(5,"div",13),b.Kc(6),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit;b.Bb(1),b.nc("src",t.avatar,b.Cc),b.Bb(3),b.Lc(t.display_name),b.Bb(2),b.Lc(t.email)}}let v=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.data=e,this.users=n,this.searchFormControl=new o.i,this.loading$=new l.a(!1),this.users$=new l.a([])}ngOnInit(){this.searchFormControl.valueChanges.pipe(Object(r.a)(250),Object(s.a)(),Object(a.a)(t=>this.searchUsers(t)),Object(c.a)(()=>Object(d.a)([]))).subscribe(t=>{this.users$.next(t),this.loading$.next(!1)})}searchUsers(t){return this.loading$.next(!0),t?this.users.getAll({query:t}):Object(d.a)([])}close(t){this.dialogRef.close(t)}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(i.h),b.Ob(i.a),b.Ob(u.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["find-user-modal"]],decls:13,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for user by name or email...",3,"formControl"],[1,"small",3,"isVisible"],[1,"users"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],[1,"email","overflow-hidden"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"h2",1),b.Kc(2,"Find User"),b.Tb(),b.Ub(3,"button",2),b.bc("click",(function(){return e.close()})),b.Pb(4,"mat-icon",3),b.Tb(),b.Tb(),b.Ub(5,"mat-dialog-content"),b.Ub(6,"div",4),b.Pb(7,"input",5),b.Pb(8,"loading-indicator",6),b.gc(9,"async"),b.Tb(),b.Ub(10,"div",7),b.Ic(11,g,7,3,"div",8),b.gc(12,"async"),b.Tb(),b.Tb()),2&t&&(b.Bb(7),b.nc("formControl",e.searchFormControl),b.Bb(1),b.nc("isVisible",b.hc(9,3,e.loading$)),b.Bb(3),b.nc("ngForOf",b.hc(12,5,e.users$)))},directives:[i.i,h.a,p.a,i.f,o.d,o.u,o.j,f.a,m.s],pipes:[m.b],styles:["[_nghost-%COMP%]{display:block;width:500px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:30px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.users[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.user[_ngcontent-%COMP%]{display:flex;width:calc(50% - 10px);flex-shrink:0;min-width:0;margin-bottom:20px;cursor:pointer}.user[_ngcontent-%COMP%]:hover{color:var(--be-accent-default)}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),t})()},DzUk:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),o=n("Lm4C");let r=(()=>{class t{constructor(t){this.el=t,this.config={},this.filesSelected=new i.n}ngOnInit(){this.el.nativeElement.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),Object(o.a)(this.config).then(t=>{t&&t.length&&this.filesSelected.emit(t)})})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l))},t.\u0275dir=i.Jb({type:t,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),t})()},IgbF:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),o=n("sPnx");let r=(()=>{class t{constructor(t){this.http=t,this.baseUri="tags"}getTags(t){return this.http.getWithCache(this.baseUri,t)}createNew(t){return this.http.post(this.baseUri,t)}update(t,e){return this.http.put(this.baseUri+"/"+t,e)}deleteMultiple(t){return this.http.delete(this.baseUri+"/delete-multiple",{ids:t})}search(t,e={}){return e=Object.assign({query:t,notType:"status",perPage:10},e),this.http.get(this.baseUri,e)}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(o.a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Um6Z:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("pLZG"),o=n("FtGj"),r=n("WAq7"),s=n("fXoL"),a=n("2hX1"),c=n("u47x"),l=n("ofXK"),d=n("NFeN");const b=["columnName"],u=["table-sort-header",""],h=["*"];let p=(()=>{class t{constructor(t,e,n,i){this.datable=t,this.cd=e,this.focusMonitor=n,this.el=i,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}get sortDisabled(){var t;return null===(t=this.datable.config)||void 0===t?void 0:t.disableSort}ngOnInit(){this.orderBy||(this.orderBy=Object(r.a)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe(Object(i.a)(t=>t.orderBy!==this.orderBy)).subscribe(()=>{this.orderDir=null,this.onMouseLeave(),this.cd.markForCheck()})}ngAfterViewInit(){this.focusMonitor.monitor(this.el).subscribe()}ngOnDestroy(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}changeSort(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}getDirection(t){switch(t){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}onMouseEnter(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||(this.arrowVisible=!0)}onMouseLeave(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}handleClick(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||this.changeSort()}handleKeydown(t){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||t.keyCode!==o.v&&t.keyCode!==o.h||(t.preventDefault(),this.changeSort())}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a),s.Ob(s.h),s.Ob(c.h),s.Ob(s.l))},t.\u0275cmp=s.Ib({type:t,selectors:[["","table-sort-header",""]],viewQuery:function(t,e){var n;1&t&&s.Gc(b,!0),2&t&&s.vc(n=s.cc())&&(e.columnName=n.first)},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&s.bc("click",(function(){return e.handleClick()}))("keydown",(function(t){return e.handleKeydown(t)}))("mouseenter",(function(){return e.onMouseEnter()}))("mouseleave",(function(){return e.onMouseLeave()})),2&t&&s.Fb("active",e.orderDir)("sort-disabled",e.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:u,ngContentSelectors:h,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(t,e){1&t&&(s.mc(),s.Ub(0,"span",0,1),s.lc(2),s.Tb(),s.Ub(3,"span",2),s.Pb(4,"mat-icon",3),s.Tb()),2&t&&(s.Bb(3),s.nc("ngClass",e.arrowDirection),s.Bb(1),s.Fb("hint-visible",e.arrowVisible))},directives:[l.q,d.a],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:1px solid}.text[_ngcontent-%COMP%]{display:inline-block}.sort-icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{vertical-align:middle}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),t})()},X3Ra:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),o=n("LRXf");let r=(()=>{class t{constructor(t){this.httpClient=t}getReplies(t){return this.httpClient.get("canned-replies",t)}create(t){return this.httpClient.post("canned-replies",t)}update(t,e){return this.httpClient.put("canned-replies/"+t,e)}delete(t){return this.httpClient.delete("canned-replies",{ids:t})}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(o.a))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},cuTO:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t={}){this.shared=!1;for(const e in t)this[e]=t[e]}}}}]);