(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"CT6/":function(t,e,n){"use strict";n.r(e),n.d(e,"CustomerMailboxModule",(function(){return St}));var i=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),r=n("2hX1"),s=n("fXoL"),o=n("twBr"),l=n("Rd8u"),b=n("bTqV"),u=n("bmro"),d=n("Um6Z"),g=n("FBzJ"),p=n("A5z7"),h=n("CH4Q"),m=n("rcZy"),f=n("iB19");function v(t,e){if(1&t&&(s.Ub(0,"mat-chip-list",32),s.Ub(1,"mat-chip",33),s.Kc(2),s.Tb(),s.Tb()),2&t){const t=e.ngIf,n=s.fc().$implicit;s.nc("selectable",!1),s.Bb(1),s.nc("color",n.closed_at?"standard":"success"),s.Bb(1),s.Lc(t.display_name)}}function y(t,e){if(1&t){const t=s.Vb();s.Ub(0,"tr",25),s.bc("click",(function(){s.zc(t);const n=e.$implicit;return s.fc().openConversation(n)})),s.Ub(1,"td",26),s.Kc(2),s.Tb(),s.Ub(3,"td",27),s.Kc(4),s.Tb(),s.Ub(5,"td",28),s.Kc(6),s.gc(7,"formattedDate"),s.Tb(),s.Ub(8,"td",29),s.Kc(9),s.Tb(),s.Ub(10,"td",30),s.Ic(11,v,3,3,"mat-chip-list",31),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,n=s.fc();s.Fb("open",!t.closed_at),s.Bb(2),s.Lc(t.subject),s.Bb(2),s.Mc("#",t.id,""),s.Bb(2),s.Lc(s.hc(7,7,t.created_at)),s.Bb(3),s.Lc(t.updated_at_formatted),s.Bb(2),s.nc("ngIf",n.getStatus(t))}}function w(t,e){1&t&&(s.Ub(0,"no-results-message",34),s.Ub(1,"span",35),s.Kc(2,"You have not created any tickets yet."),s.Tb(),s.Tb())}function x(t,e){1&t&&s.Pb(0,"datatable-footer",36),2&t&&s.nc("hidePerPage",!0)}let k=(()=>{class t{constructor(t,e,n,i){this.currentUser=t,this.router=e,this.route=n,this.datatable=i,this.tickets$=this.datatable.data$,this.statusFormControl=new a.i(this.route.snapshot.queryParams.status||"")}ngOnInit(){this.datatable.init({uri:"tickets",staticParams:{userId:this.currentUser.get("id")}}),this.statusFormControl.valueChanges.subscribe(t=>{this.datatable.addFilter("tagId",t)})}ngOnDestroy(){this.datatable.destroy()}getStatus(t){return t.tags.filter(t=>"status"===t.type)[0]}openConversation(t){this.router.navigate(["/help-center/tickets",t.id])}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.a),s.Ob(c.f),s.Ob(c.a),s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["customer-tickets-list"]],features:[s.Ab([r.a])],decls:44,vars:13,consts:[[1,"container"],[1,"title"],["trans",""],["routerLink","/help-center/tickets/new","mat-raised-button","","color","accent","trans",""],[1,"filter-form"],[1,"input-container"],[1,"input-with-icon"],["placeholder","Search requests...",1,"icon-left"],[1,"input-container","status-input-container"],["for","customer-ticket-status","trans","",1,"hidden"],["id","customer-ticket-status",1,"filter-input",3,"formControl"],["value","","trans",""],["value","open","trans",""],["value","closed","trans",""],["value","pending","trans",""],[1,"material-table","responsive-table"],["trans","",1,"subject-column"],["table-sort-header","","trans","",1,"id-column"],["table-sort-header","created_at","trans","",1,"created-column"],["table-sort-header","updated_at","trans","",1,"last-updated-column"],["trans","",1,"status-column"],[3,"open","click",4,"ngFor","ngForOf"],["svgImage","opened.svg",4,"ngIf"],[3,"hidePerPage",4,"ngIf"],[1,"overlay",3,"isVisible"],[3,"click"],["data-label","Subject",1,"subject-column"],["data-label","ID",1,"id-column"],["data-label","Created",1,"created-column"],["data-label","Last Updated",1,"last-updated-column"],["data-label","Status",1,"status-column"],[3,"selectable",4,"ngIf"],[3,"selectable"],["selected","","trans","",3,"color"],["svgImage","opened.svg"],["primary-text",""],[3,"hidePerPage"]],template:function(t,e){if(1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"h1",2),s.Kc(3,"My requests"),s.Tb(),s.Ub(4,"a",3),s.Kc(5,"New Request"),s.Tb(),s.Tb(),s.Ub(6,"form",4),s.Ub(7,"div",5),s.Ub(8,"div",6),s.Pb(9,"datatable-header-search-input",7),s.Tb(),s.Tb(),s.Ub(10,"div",8),s.Ub(11,"label",9),s.Kc(12,"Status"),s.Tb(),s.Ub(13,"select",10),s.Ub(14,"option",11),s.Kc(15,"All Requests"),s.Tb(),s.Ub(16,"option",12),s.Kc(17,"Open Requests"),s.Tb(),s.Ub(18,"option",13),s.Kc(19,"Closed Requests"),s.Tb(),s.Ub(20,"option",14),s.Kc(21,"Awaiting your reply"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(22,"table",15),s.Ub(23,"thead"),s.Ub(24,"tr"),s.Ub(25,"th",16),s.Kc(26,"Subject"),s.Tb(),s.Ub(27,"th",17),s.Kc(28,"ID"),s.Tb(),s.Ub(29,"th",18),s.Kc(30,"Created"),s.Tb(),s.Ub(31,"th",19),s.Kc(32,"Last Updated"),s.Tb(),s.Ub(33,"th",20),s.Kc(34,"Status"),s.Tb(),s.Tb(),s.Tb(),s.Ub(35,"tbody"),s.Ic(36,y,12,9,"tr",21),s.gc(37,"async"),s.Tb(),s.Tb(),s.Ic(38,w,3,0,"no-results-message",22),s.gc(39,"async"),s.Ic(40,x,1,1,"datatable-footer",23),s.gc(41,"async"),s.Tb(),s.Pb(42,"loading-indicator",24),s.gc(43,"async")),2&t){var n;const t=(null==(n=s.hc(41,9,e.datatable.paginator.response$))?null:n.pagination.total)>15;s.Bb(13),s.nc("formControl",e.statusFormControl),s.Bb(23),s.nc("ngForOf",s.hc(37,5,e.tickets$)),s.Bb(2),s.nc("ngIf",s.hc(39,7,e.datatable.paginator.noResults$)),s.Bb(2),s.nc("ngIf",t),s.Bb(2),s.nc("isVisible",s.hc(43,11,e.datatable.paginator.loading$))}},directives:[l.a,c.i,b.a,a.K,a.v,a.w,u.a,a.G,a.u,a.j,a.z,a.J,d.a,i.s,i.t,g.a,p.d,p.a,h.a,m.a],pipes:[i.b,f.a],styles:["[_nghost-%COMP%]{display:block;width:100%;padding:30px 0 50px}.title[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px;padding:0 20px}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.2rem;font-weight:400;margin:0}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:auto;height:36px}.filter-form[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:35px;padding:0 10px}.status-input-container[_ngcontent-%COMP%]{max-width:200px;margin-left:15px}datatable-header-search-input[_ngcontent-%COMP%]     input{height:50px;padding-left:40px}table[_ngcontent-%COMP%]{table-layout:fixed}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:60px;cursor:pointer}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--be-accent-emphasis)}.subject-column[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:25px}.id-column[_ngcontent-%COMP%], .status-column[_ngcontent-%COMP%]{width:110px}.created-column[_ngcontent-%COMP%], .last-updated-column[_ngcontent-%COMP%]{width:160px}.mat-chip[_ngcontent-%COMP%]{min-width:63px;justify-content:center;text-transform:capitalize}.mat-chip.mat-success[_ngcontent-%COMP%]{background-color:#43a047;color:#fff}.no-results-message[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:60px}"]}),t})();var T=n("LsVx"),O=n("KKQg"),U=n("h586"),I=n("2Vo4"),C=n("jtHE"),P=n("nYR2"),M=n("kmQS"),B=n("oVOl"),_=n("74SX"),K=n("i2dy"),L=n("S5uz"),j=n("Kj3r"),S=n("/uUt"),$=n("eIep"),F=n("JIr8"),V=n("LRne"),A=n("KHvZ"),z=n("NFeN"),R=n("YdAL");function q(t,e){if(1&t){const t=s.Vb();s.Ub(0,"a",8),s.bc("click",(function(){return s.zc(t),s.fc().updateSearchLogger()})),s.Pb(1,"mat-icon",9),s.Ub(2,"span",10),s.Kc(3),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,n=s.fc();s.nc("routerLink",n.urls.article(t)),s.Bb(3),s.Lc(t.title)}}let Q=(()=>{class t{constructor(t,e,n){this.helpCenter=t,this.urls=e,this.searchLogger=n,this.inputValue=new s.n,this.searchQuery=new a.i,this.articles=[],this.searching=!1}ngOnInit(){this.searchQuery.valueChanges.pipe(Object(j.a)(400),Object(S.a)(),Object($.a)(t=>this.searchArticles(t)),Object(F.a)(()=>Object(V.a)({pagination:{data:[]}}))).subscribe(t=>{this.inputValue.emit(this.searchQuery.value),this.searching=!1,this.setSearchResults(t.pagination.data)})}searchArticles(t){return t?(this.searching=!0,this.helpCenter.findArticles({query:t,perPage:4,categories:this.categories})):Object(V.a)({pagination:{data:[]}})}setSearchResults(t){t&&t.length?this.articles=t:setTimeout(()=>{this.articles=[]},300)}updateSearchLogger(){this.searchLogger.updateSession({clickedArticle:!0})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(A.a),s.Ob(_.a),s.Ob(L.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["suggested-articles-drawer"]],inputs:{placeholder:"placeholder",categories:"categories"},outputs:{inputValue:"inputValue"},decls:9,vars:7,consts:[[1,"suggestions-container"],[1,"input-container"],["type","text",1,"search-input",3,"formControl"],["svgIcon","search",1,"search-icon","input-icon"],[1,"results-container"],["trans","",1,"results-header"],["customScrollbar","",1,"results"],["class","result","target","_blank",3,"routerLink","click",4,"ngFor","ngForOf"],["target","_blank",1,"result",3,"routerLink","click"],["svgIcon","description"],[1,"title"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Pb(2,"input",2),s.Pb(3,"mat-icon",3),s.Tb(),s.Ub(4,"section",4),s.Ub(5,"div",5),s.Kc(6,"Were you looking for:"),s.Tb(),s.Ub(7,"div",6),s.Ic(8,q,4,2,"a",7),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Fb("has-results",e.articles.length),s.Bb(2),s.nc("formControl",e.searchQuery),s.Cb("placeholder",e.placeholder),s.Bb(1),s.Fb("searching",e.searching),s.Bb(5),s.nc("ngForOf",e.articles))},directives:[a.d,a.u,a.j,z.a,l.a,R.a,i.s,c.i],styles:["suggested-articles-drawer{display:block}suggested-articles-drawer .results-container{max-height:0;transition:all .3s ease-out;margin:0;overflow:hidden}suggested-articles-drawer .results-container>.results-header{font-size:2.1rem;font-weight:300;margin-bottom:20px}suggested-articles-drawer .results-container>.results>.result{display:flex;align-items:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:12px;width:100%;color:var(--be-link);cursor:pointer}suggested-articles-drawer .results-container>.results>.result:hover{text-decoration:underline}suggested-articles-drawer .results-container>.results>.result>mat-icon{margin-right:10px}suggested-articles-drawer .results-container>.results>.result>.title{color:inherit}suggested-articles-drawer .suggestions-container .input-container{position:relative;width:100%}suggested-articles-drawer .suggestions-container .input-container>.input-icon{position:absolute;visibility:hidden;top:13px;right:11px;color:var(--be-secondary-text)}suggested-articles-drawer .suggestions-container .input-container>.input-icon.searching{visibility:visible;-webkit-animation:flickerAnimation .5s infinite;animation:flickerAnimation .5s infinite}@-webkit-keyframes flickerAnimation{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes flickerAnimation{0%{opacity:1}50%{opacity:.4}to{opacity:1}}suggested-articles-drawer .suggestions-container.has-results .results-container{max-height:230px;margin:20px 0;transition:all .3s ease-in}"],encapsulation:2}),t})();var N=n("rG4v"),D=n("83jf");function X(t,e){if(1&t&&(s.Ub(0,"option",26),s.Kc(1),s.Tb()),2&t){const t=e.$implicit;s.nc("ngValue",t),s.Bb(1),s.Lc(t.display_name||t.name)}}function H(t,e){if(1&t&&(s.Ub(0,"div",27),s.Kc(1),s.Tb()),2&t){const t=s.fc().ngIf;s.Bb(1),s.Lc(t.category||t.purchase_code)}}function J(t,e){if(1&t&&(s.Ub(0,"div",28),s.Kc(1),s.Tb()),2&t){const t=s.fc().ngIf;s.Bb(1),s.Lc(t.subject)}}function E(t,e){if(1&t&&(s.Ub(0,"div",29),s.Kc(1),s.Tb()),2&t){const t=s.fc().ngIf;s.Bb(1),s.Lc(t.body)}}function Y(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",8),s.bc("ngSubmit",(function(){return s.zc(t),s.fc(2).createTicket()})),s.Ub(1,"h1",9),s.Kc(2),s.Tb(),s.Ub(3,"div",10),s.Ub(4,"label",11),s.Kc(5),s.Tb(),s.Ub(6,"select",12),s.bc("ngModelChange",(function(e){return s.zc(t),s.fc(2).ticketModel.category=e})),s.Ic(7,X,2,2,"option",13),s.Tb(),s.Ic(8,H,2,1,"div",14),s.Tb(),s.Ub(9,"div",15),s.Ub(10,"label",16),s.Kc(11),s.Tb(),s.Ub(12,"suggested-articles-drawer",17),s.bc("inputValue",(function(e){return s.zc(t),s.fc(2).ticketModel.subject=e})),s.Tb(),s.Ic(13,J,2,1,"div",18),s.Tb(),s.Ub(14,"div",19),s.Ub(15,"label",20),s.Kc(16),s.Tb(),s.Ub(17,"text-editor",21),s.bc("onFileUpload",(function(e){return s.zc(t),s.fc(2).uploadFiles(e)}))("onChange",(function(e){return s.zc(t),s.fc(2).ticketModel.body=e})),s.Tb(),s.Pb(18,"upload-progress-bar"),s.Ic(19,E,2,1,"div",22),s.Tb(),s.Ub(20,"reply-attachment-list",23),s.bc("detached",(function(e){return s.zc(t),s.fc(2).removeAttachment(e)})),s.gc(21,"async"),s.Tb(),s.Ub(22,"div",24),s.Ub(23,"button",25),s.Kc(24),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.ngIf,n=s.fc().ngIf,i=s.fc();s.Bb(2),s.Lc(n.title),s.Bb(3),s.Lc(n.categoryLabel),s.Bb(1),s.nc("ngModel",i.ticketModel.category),s.Bb(1),s.nc("ngForOf",i.ticketCategories),s.Bb(1),s.nc("ngIf",t.category||t.purchase_code),s.Bb(3),s.Lc(n.subjectLabel),s.Bb(1),s.nc("categories",i.getArticleCategories()),s.Bb(1),s.nc("ngIf",t.subject),s.Bb(3),s.Lc(n.descriptionLabel),s.Bb(1),s.nc("minHeight",230),s.Bb(2),s.nc("ngIf",t.body),s.Bb(1),s.nc("attachments",s.hc(21,13,i.attachments$)),s.Bb(4),s.Lc(n.submitButtonText)}}function G(t,e){if(1&t&&(s.Ub(0,"div",30),s.Ub(1,"div",31),s.Kc(2),s.Tb(),s.Ub(3,"div",32),s.Kc(4),s.Tb(),s.Tb()),2&t){const t=e.$implicit;s.Bb(2),s.Lc(t.title),s.Bb(2),s.Lc(t.content)}}function Z(t,e){if(1&t&&(s.Sb(0),s.Ub(1,"div",2),s.Ic(2,Y,25,15,"form",3),s.gc(3,"async"),s.Tb(),s.Ub(4,"div",4),s.Ub(5,"div",5),s.Kc(6),s.Tb(),s.Ub(7,"div",6),s.Ic(8,G,5,2,"div",7),s.Tb(),s.Tb(),s.Rb()),2&t){const t=e.ngIf,n=s.fc();s.Bb(2),s.nc("ngIf",s.hc(3,3,n.errors$)),s.Bb(4),s.Lc(t.sidebarTitle),s.Bb(2),s.nc("ngForOf",t.sidebarTips)}}let W=(()=>{class t{constructor(t,e,n,i,a,c,r,s,o){this.settings=t,this.tickets=e,this.uploads=n,this.router=i,this.urls=a,this.route=c,this.toast=r,this.uploadQueue=s,this.searchLogger=o,this.errors$=new I.a({}),this.loading$=new I.a(!1),this.attachments$=new I.a([]),this.ticketCategories=[],this.ticketModel={},this.content$=new C.a(1),this.settings.all$().subscribe(()=>{this.content$.next(this.settings.getJson("hc.newTicket.appearance",{}))})}ngOnInit(){this.route.data.subscribe(t=>{this.ticketCategories=t.categories,this.ticketModel.category=this.ticketCategories[0]})}ngOnDestroy(){this.textEditor.destroyEditor()}createTicket(){this.loading$.next(!0);const t={subject:this.ticketModel.subject,body:this.ticketModel.body,category:this.ticketModel.category&&this.ticketModel.category.id,uploads:this.uploadQueue.getAllCompleted().map(t=>t.id)};this.tickets.create(t).pipe(Object(P.a)(()=>{this.loading$.next(!1)})).subscribe(()=>{this.searchLogger.updateSessionAndStore({createdTicket:!0}),this.router.navigate(this.urls.customerTicketList()),this.toast.open("Your request was successfully submitted.")},t=>{this.errors$.next(t.errors)})}uploadFiles(t){this.uploadQueue.start(t).subscribe(t=>{this.attachments$.next([...this.attachments$.value,t.fileEntry])})}removeAttachment(t){const e=this.attachments$.value.slice();for(let n=0;n<e.length;n++)e[n].id===t.id&&e.splice(n,1);this.attachments$.next(e)}getArticleCategories(){return this.ticketModel.category?this.ticketModel.category.categories.map(t=>t.id):[]}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(M.a),s.Ob(T.a),s.Ob(B.a),s.Ob(c.f),s.Ob(_.a),s.Ob(c.a),s.Ob(K.b),s.Ob(U.a),s.Ob(L.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["new-ticket"]],viewQuery:function(t,e){var n;1&t&&s.Rc(O.a,!0),2&t&&s.vc(n=s.cc())&&(e.textEditor=n.first)},hostAttrs:["id","new-ticket"],features:[s.Ab([T.a,U.a])],decls:4,vars:6,consts:[[4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"left-column"],["ngNativeValidate","",3,"ngSubmit",4,"ngIf"],[1,"right-column"],["trans","",1,"header"],[1,"tips"],["class","tip-container",4,"ngFor","ngForOf"],["ngNativeValidate","",3,"ngSubmit"],["trans",""],[1,"input-container","category-input-container"],["for","category-select","trans",""],["name","category","id","category-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","errors category-error",4,"ngIf"],[1,"input-container","subject-input-container"],["for","subject","trans",""],["id","subject","trans-placeholder","",3,"categories","inputValue"],["class","errors subject-error",4,"ngIf"],[1,"input-container","description-input-container"],["for","description","trans",""],["id","description","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload","onChange"],["class","errors body-error",4,"ngIf"],[3,"attachments","detached"],[1,"buttons"],["mat-raised-button","","color","accent","type","submit",1,"submit-button"],[3,"ngValue"],[1,"errors","category-error"],[1,"errors","subject-error"],[1,"errors","body-error"],[1,"tip-container"],["trans","",1,"title"],["trans","",1,"content"]],template:function(t,e){1&t&&(s.Ic(0,Z,9,5,"ng-container",0),s.gc(1,"async"),s.Pb(2,"loading-indicator",1),s.gc(3,"async")),2&t&&(s.nc("ngIf",s.hc(1,2,e.content$)),s.Bb(2),s.nc("isVisible",s.hc(3,4,e.loading$)))},directives:[i.t,g.a,l.a,i.s,a.v,a.w,a.G,a.u,a.x,Q,O.a,N.a,D.a,b.b,a.z,a.J],pipes:[i.b],styles:["new-ticket{display:flex;flex-wrap:wrap-reverse;width:100%;max-width:1800px;margin:0 auto;border-top:1px solid var(--be-divider-lighter)}new-ticket .left-column{flex:0 0 70%;padding:45px 20px}new-ticket .left-column form{margin:0 auto;width:660px}new-ticket .right-column{flex:0 0 30%;border-left:1px solid var(--be-divider-lighter);padding:45px 30px}new-ticket .right-column .header{font-size:2.1rem;color:var(--be-accent-default);font-weight:500;margin-bottom:35px}new-ticket .right-column .tip-container{margin-bottom:30px;font-size:1.6rem}new-ticket .right-column .tip-container .title{font-weight:400}new-ticket .right-column .tip-container .content{font-weight:300}new-ticket .input-container{margin-bottom:25px}new-ticket .input-container .input-container{margin-bottom:0}new-ticket .input-container input,new-ticket .input-container select{height:50px}new-ticket .input-container label{font-size:1.6rem;font-weight:300;margin-bottom:5px}new-ticket .errors{margin-top:7px;color:#f44336}new-ticket h1{margin:0 0 25px;color:var(--be-help-center-title-text);font-weight:300;font-size:4rem}new-ticket .buttons{margin-bottom:15px}@media only screen and (max-width:768px){new-ticket .left-column{flex:0 0 100%;padding-top:0;padding-bottom:0}new-ticket .left-column>form{width:auto}new-ticket .right-column{flex:0 0 100%;border-bottom:1px solid var(--be-divider-lighter);margin-bottom:10px;padding:20px 30px 0}}"],encapsulation:2,changeDetection:0}),t})();var tt=n("N2vX"),et=n("XRKU"),nt=n("owyN"),it=n("/R+w");const at=["class","customer-mailbox"];function ct(t,e){1&t&&s.Pb(0,"customer-footer")}let rt=(()=>{class t{constructor(t){this.settings=t}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(M.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["customer-mailbox",8,"customer-mailbox"]],attrs:at,decls:5,vars:1,consts:[["menuPosition","header",1,"hc-content-navbar"],["placeholder","Search help center...",1,"nav-searchbar"],["resource","Tickets","resourceType","static",1,"container"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Ub(0,"material-navbar",0),s.Pb(1,"suggested-articles-dropdown",1),s.Tb(),s.Pb(2,"breadcrumbs",2),s.Pb(3,"router-outlet"),s.Ic(4,ct,1,0,"customer-footer",3)),2&t&&(s.Bb(4),s.nc("ngIf",!e.settings.get("hc.hide_footer")))},directives:[tt.a,et.a,nt.a,c.k,i.t,it.a],styles:["customer-mailbox{display:block;padding-top:70px}customer-mailbox breadcrumbs.container{margin:0 auto;padding:36px;font-size:1.6rem}customer-mailbox customer-conversation,customer-mailbox customer-tickets-list,customer-mailbox new-ticket{min-height:calc(100vh - 165px)}@media screen and (max-width:768px){customer-mailbox breadcrumbs{display:none}}"],encapsulation:2}),t})();var st=n("apsj"),ot=n("wWhK"),lt=n("wfim"),bt=n("pfRy"),ut=n("b7Mq"),dt=n("qH/R"),gt=n("3H9V");const pt=["scrollContainer"];function ht(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",5),s.Ub(1,"button",6),s.bc("click",(function(){return s.zc(t),s.fc().markAsSolved()})),s.Kc(2,"Mark as solved"),s.Tb(),s.Tb()}}let mt=(()=>{class t{constructor(t,e,n,i,a,c){this.route=t,this.uploads=e,this.currentUser=n,this.conversation=i,this.tickets=a,this.tags=c}ngAfterViewInit(){this.conversation.scrollContainer=this.scrollContainer.nativeElement}ngOnInit(){this.route.data.subscribe(t=>{this.conversation.init(t.ticket)})}markAsSolved(){const t=this.tags.getTagByIdOrName("closed");this.tickets.changeTicketStatus(this.conversation.get().id,t.name).subscribe(()=>{this.conversation.afterReplyAction.navigateToCustomerTicketsList("Ticket marked as solved."),this.conversation.setStatus(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(c.a),s.Ob(B.a),s.Ob(o.a),s.Ob(ot.a),s.Ob(T.a),s.Ob(lt.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["customer-conversation"]],viewQuery:function(t,e){var n;1&t&&s.Rc(pt,!0),2&t&&s.vc(n=s.cc())&&(e.scrollContainer=n.first)},features:[s.Ab([st.a])],decls:8,vars:3,consts:[[1,"container"],["class","resolve-btn-container",4,"ngIf"],["conversationInfiniteScroll","",1,"ticket-container",3,"scrollTargetIsDocument"],["scrollContainer",""],[1,"overlay",3,"isVisible"],[1,"resolve-btn-container"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ic(1,ht,3,0,"div",1),s.Ub(2,"div",2,3),s.Pb(4,"conversation-header"),s.Pb(5,"conversation-text-editor"),s.Pb(6,"conversation-replies"),s.Tb(),s.Tb(),s.Pb(7,"loading-indicator",4)),2&t&&(s.Bb(1),s.nc("ngIf",!e.conversation.get().closed_at),s.Bb(1),s.nc("scrollTargetIsDocument",!0),s.Bb(5),s.nc("isVisible",e.conversation.replies.isLoading||e.conversation.isLoading))},directives:[i.t,bt.a,ut.a,dt.a,gt.a,g.a,b.b,l.a],styles:["[_nghost-%COMP%]{display:block;position:relative}.ticket-container[_ngcontent-%COMP%]{padding-bottom:50px}.resolve-btn-container[_ngcontent-%COMP%]{margin-bottom:40px;text-align:right}"]}),t})();var ft=n("Dbf7"),vt=n("i70M"),yt=n("0QyJ");const wt=c.j.forChild([{path:"",component:rt,canActivate:[yt.a],children:[{path:"",component:k},{path:"new",component:W,resolve:{categories:vt.a},data:{permissions:["tickets.create","tags.view"]}},{path:":id",component:mt,resolve:{ticket:ft.a}}]}]);var xt=n("xqw2"),kt=n("DldP"),Tt=n("MK/P"),Ot=n("gFpt"),Ut=n("YHvm"),It=n("6rvT"),Ct=n("k3xQ"),Pt=n("X3pI"),Mt=n("Iysn"),Bt=n("hD7E"),_t=n("JZOH"),Kt=n("V2vN"),Lt=n("GSRO"),jt=n("1ImS");let St=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.c,a.o,a.E,c.j,kt.a,xt.a,Tt.a,Ut.a,Ot.a,It.a,Pt.a,Mt.a,Bt.a,_t.a,Kt.a,Lt.a,jt.a,wt,z.b,p.g,b.c,Ct.a]]}),t})()},bmro:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("3Pt+"),a=n("Kj3r"),c=n("/uUt"),r=n("fXoL"),s=n("2hX1"),o=n("tyNb"),l=n("ofXK"),b=n("NFeN"),u=n("zW5C");function d(t,e){1&t&&r.Pb(0,"mat-icon",3)}let g=(()=>{class t{constructor(t,e){this.datatable=t,this.route=e,this.searchControl=new i.i(this.route.snapshot.queryParams.query),this.hideIcon=!1}ngOnInit(){this.searchControl.valueChanges.pipe(Object(a.a)(400),Object(c.a)()).subscribe(t=>{this.datatable.addFilter("query",t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(s.a),r.Ob(o.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["datatable-header-search-input"]],inputs:{placeholder:"placeholder",hideIcon:"hideIcon"},decls:4,vars:5,consts:[[1,"input-container","search-input-container"],["type","text",1,"search-input",3,"placeholder","formControl"],["svgIcon","search",4,"ngIf"],["svgIcon","search"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Pb(1,"input",1),r.gc(2,"trans"),r.Ic(3,d,1,0,"mat-icon",2),r.Tb()),2&t&&(r.Bb(1),r.nc("placeholder",r.hc(2,3,e.placeholder))("formControl",e.searchControl),r.Bb(2),r.nc("ngIf",!e.hideIcon))},directives:[i.d,i.u,i.j,l.t,b.a],pipes:[u.a],styles:[".input-container[_ngcontent-%COMP%]{min-width:250px;position:relative;flex-shrink:0}.input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 12px);right:5px;color:var(--be-secondary-text)}.icon-left[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%], .icon-left   [_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{left:10px;right:0}"],changeDetection:0}),t})()},iB19:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),a=n("ofXK"),c=n("kmQS");let r=(()=>{class t{constructor(t,e){this.settings=t,this._locale=e,this.format=this.settings.get("dates.format","yyyy-MM-dd"),this.angularPipe=new a.f(e)}transform(t,e,n,i){return t=t&&"string"==typeof t?t.replace(/\//g,"-"):t,this.angularPipe.transform(t,e||this.format,n,i)}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(c.a),i.Ob(i.v))},t.\u0275pipe=i.Nb({name:"formattedDate",type:t,pure:!0}),t})()}}]);